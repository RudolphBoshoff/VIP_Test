<aetgt:getResponse xmlns:aetgt="http://schemas.active-endpoints.com/appmodules/repository/2010/10/avrepository.xsd"
                   xmlns:types1="http://schemas.active-endpoints.com/appmodules/repository/2010/10/avrepository.xsd">
   <types1:Item>
      <types1:EntryId>N4GkRCU7uMydx2C-gt-1244305-2022-12-16T08:04:36.316Z::pd.xml</types1:EntryId>
      <types1:Name>Process_DownloadDocsVPC_Single</types1:Name>
      <types1:ParentFlowIds>9Dt0x7bcoq3xgjA-gt-15480199-2022-12-29T07:15:49.977Z::pd.xml,TypKwKBqRi92qBb-gt-1225783-2022-12-16T08:04:37.375Z::pd.xml</types1:ParentFlowIds>
      <types1:MimeType>application/xml+process</types1:MimeType>
      <types1:Description/>
      <types1:AppliesTo/>
      <types1:Tags>.agent:VIP_IICS_SA_SG_ONPREM_GROUP,.anonymous</types1:Tags>
      <types1:VersionLabel>1.0</types1:VersionLabel>
      <types1:State>CURRENT</types1:State>
      <types1:ProcessGroup/>
      <types1:CreatedBy>Rudolph.Boshoff.TST</types1:CreatedBy>
      <types1:CreationDate>2022-12-16T08:04:36Z</types1:CreationDate>
      <types1:ModifiedBy>Rudolph.Boshoff.TST</types1:ModifiedBy>
      <types1:ModificationDate>2023-01-06T13:05:24Z</types1:ModificationDate>
      <types1:PublicationStatus>published</types1:PublicationStatus>
      <types1:PublishedBy>Rudolph.Boshoff.TST</types1:PublishedBy>
      <types1:PublicationDate>2023-01-07T14:00:38Z</types1:PublicationDate>
      <types1:PublishedContributionId>project:/spi.Process_DownloadDocsVPC_Single/Process_DownloadDocsVPC_Single.pd.xml</types1:PublishedContributionId>
      <types1:AutosaveExists>false</types1:AutosaveExists>
      <types1:Entry>
         <process xmlns="http://schemas.active-endpoints.com/appmodules/screenflow/2010/10/avosScreenflow.xsd"
                  xmlns:tfm="http://schemas.active-endpoints.com/appmodules/screenflow/2021/04/taskflowModel.xsd"
                  xmlns:list="urn:activevos:spi:list:functions"
                  displayName="Process_DownloadDocsVPC_Single"
                  name="Process_DownloadDocsVPC_Single"
                  overrideAPIName="false">
            <parameterSet xmlns="http://schemas.active-endpoints.com/appmodules/screenflow/2021/04/taskflowModel.xsd"/>
            <appliesTo/>
            <description/>
            <tags>.agent:VIP_IICS_SA_SG_ONPREM_GROUP,.anonymous</tags>
            <generator>Informatica Process Designer 11</generator>
            <input>
               <parameter description="Unique ID of the transaction (this can be generated by the source system or manually entered)"
                          name="in_X_TRANSACTION_ID"
                          required="true"
                          type="string">
                  <options>
                     <option name="required">false</option>
                  </options>
               </parameter>
               <parameter description="The name of the event that caused the API to start (e.g. Matter_Created)"
                          name="in_EventName"
                          required="true"
                          type="string">
                  <options>
                     <option name="required">false</option>
                  </options>
               </parameter>
               <parameter description="Process ID of the parent process"
                          name="in_IICS_Process_ID"
                          required="true"
                          type="string">
                  <options>
                     <option name="required">false</option>
                  </options>
               </parameter>
               <parameter description="Start datetime of the parent process"
                          name="in_ParentProcessStartTime"
                          type="datetime">
                  <options>
                     <option name="thirtyMinutesIncrement">true</option>
                     <option name="required">false</option>
                  </options>
               </parameter>
               <parameter description="The name of the API started by the event (e.g. API-08)"
                          name="in_ApiName"
                          required="true"
                          type="string">
                  <options>
                     <option name="required">false</option>
                  </options>
               </parameter>
               <parameter description="Please enter &#34;Base64&#34; or &#34;Binary&#34;"
                          name="in_DocFormat"
                          type="string">
                  <options>
                     <option name="required">false</option>
                  </options>
               </parameter>
               <parameter description="Used for Base64" name="in_HolderNr" type="string">
                  <options>
                     <option name="required">false</option>
                  </options>
               </parameter>
               <parameter description="Used for Binary" name="in_DocFileId" type="string">
                  <options>
                     <option name="required">false</option>
                  </options>
               </parameter>
               <parameter description="Used for Base64" name="in_FileNr" type="string">
                  <options>
                     <option name="required">false</option>
                  </options>
               </parameter>
            </input>
            <output>
               <field description=""
                      name="out_DownloadDocsVPC_Feedback"
                      type="objectlist">
                  <options>
                     <option name="referenceTo">$po:PoSapStdOutput-1</option>
                     <option hide="true" name="multiSelect">true</option>
                     <option name="required">false</option>
                     <option name="isCopy">true</option>
                     <option name="guid">744PJPq37S2lH1aSoGbVii</option>
                  </options>
               </field>
               <field description="" name="out_Doc_Base64" type="string">
                  <options>
                     <option name="required">false</option>
                  </options>
               </field>
               <field description="" name="out_Doc_Binary" type="attachment">
                  <options>
                     <option hide="true" name="count">1</option>
                     <option name="maxsize">5242880</option>
                     <option name="required">false</option>
                  </options>
               </field>
               <field description="" name="out_Doc_Base64_Full" type="reference">
                  <options>
                     <option name="referenceTo">AppSvcVpcDocumentManagement-v8:Holders_Documents</option>
                     <option name="required">false</option>
                     <option name="isCopy">true</option>
                     <option name="guid">7H3QhWxWnzVfusEDt4618O</option>
                  </options>
               </field>
               <field description="" name="out_Doc_Binary_Full" type="string">
                  <options>
                     <option name="required">false</option>
                  </options>
               </field>
            </output>
            <tempFields>
               <field description="" name="tmp_VPC_Hostname" type="string">
                  <options>
                     <option name="required">false</option>
                  </options>
               </field>
            </tempFields>
            <notes/>
            <deployment skipIfRunning="false" suspendOnFault="false" tracingLevel="verbose">
               <targetLocation>VIP_IICS_SA_SG_ONPREM_GROUP</targetLocation>
               <rest>
                  <allowAnonymousAccess/>
               </rest>
            </deployment>
            <flow id="a">
               <start id="b">
                  <link id="lasbo0h3" targetId="lasbo0h2"/>
               </start>
               <assignment id="lasbo0h2">
                  <title>Set Process Variables</title>
                  <operation source="formula" to="temp.tmp_VPC_Hostname">
                     <expression language="XQuery">util:resolveURN('URN_VPC_Hostname')</expression>
                  </operation>
                  <operation source="formula" to="input.in_DocFormat">
                     <expression language="XQuery">util:iif(util:isNull($input.in_DocFormat ), 'Base64', $input.in_DocFormat )</expression>
                  </operation>
                  <link id="lasbo0h4" targetId="lasa5b85"/>
               </assignment>
               <subflow id="lasa5b85">
                  <title>Get VPC Token</title>
                  <subflowGUID>07bmeP8qUUzjnAwYUaz46x</subflowGUID>
                  <subflowPath>P_VPC_GetToken-2</subflowPath>
                  <runForEach>false</runForEach>
                  <input/>
                  <outputDef>
                     <field name="out_vpc_token" type="string">
                        <options>
                           <option name="required">false</option>
                        </options>
                     </field>
                  </outputDef>
                  <link id="lbbufmzt" targetId="lbbufmzs"/>
               </subflow>
               <container id="lbbufmzs" type="exclusive">
                  <title>Doc Format</title>
                  <flow id="lbbufmzw">
                     <eventContainer id="lbbufnb6">
                        <service id="lbbufnbc">
                           <title>Download Base64 File from VPC</title>
                           <serviceName>AppSvcVpcDocumentManagement-v8:GET_Holders_Documents</serviceName>
                           <serviceGUID>7H3QhWxWnzVfusEDt4618O</serviceGUID>
                           <serviceInput>
                              <parameter name="base_url" source="field" updatable="true">temp.tmp_VPC_Hostname</parameter>
                              <parameter name="access_token" source="field" updatable="true">output.out_vpc_token</parameter>
                              <parameter name="holderNr" source="field" updatable="true">input.in_HolderNr</parameter>
                              <parameter name="fileNr" source="field" updatable="true">input.in_FileNr</parameter>
                           </serviceInput>
                        </service>
                        <flow id="lbbufnb7">
                           <assignment id="lbbufnb8">
                              <title>Set  Success Output</title>
                              <operation source="formula" to="output.out_DownloadDocsVPC_Feedback">
                                 <expression language="XQuery">&lt;PoSapStdOutput&gt;
   &lt;HttpStatusCode&gt;{$output.o_Svc_http_ResponseCode  }&lt;/HttpStatusCode&gt;
   &lt;Detail&gt;Download Successful&lt;/Detail&gt;
   &lt;Reason&gt;&lt;/Reason&gt;
   &lt;Parameters&gt;
      &lt;Identifier&gt;TechnicalFormat&lt;/Identifier&gt;
      &lt;Value&gt;Base64&lt;/Value&gt;
   &lt;/Parameters&gt;
   &lt;Parameters&gt;
      &lt;Identifier&gt;FileType&lt;/Identifier&gt;
      &lt;Value&gt;{$output.o_svcVpcDoc_EResp[1]/value[1]/fileType   }&lt;/Value&gt;
   &lt;/Parameters&gt;
   &lt;Parameters&gt;
      &lt;Identifier&gt;FileName&lt;/Identifier&gt;
      &lt;Value&gt;{$output.o_svcVpcDoc_EResp[1]/value[1]/fileName  }&lt;/Value&gt;
   &lt;/Parameters&gt;
&lt;/PoSapStdOutput&gt;
</expression>
                              </operation>
                              <operation source="field" to="output.out_Doc_Base64">output.o_svcVpcDoc_EResp[1]/value[1]/fileBytes</operation>
                              <operation source="field" to="output.out_Doc_Base64_Full">output.o_svcVpcDoc_EResp</operation>
                           </assignment>
                           <link id="lbbufnbf" targetId="lbbufnb6" type="containerLink"/>
                        </flow>
                        <flow id="lbbufnb9">
                           <assignment id="lbbutvnu">
                              <title>Set Failure Output</title>
                              <operation source="formula" to="output.out_DownloadDocsVPC_Feedback">
                                 <expression language="XQuery">&lt;PoSapStdOutput&gt;
   &lt;HttpStatusCode&gt;{$output.faultInfo[1]/code }&lt;/HttpStatusCode&gt;
   &lt;Detail&gt;{$output.faultInfo[1]/detail}&lt;/Detail&gt;
   &lt;Reason&gt;{$output.faultInfo[1]/reason}&lt;/Reason&gt;
   &lt;Parameters&gt;
      &lt;Identifier&gt;HolderNr&lt;/Identifier&gt;
      &lt;Value&gt;{$input.in_HolderNr  }&lt;/Value&gt;
   &lt;/Parameters&gt;
   &lt;Parameters&gt;
      &lt;Identifier&gt;FileNr&lt;/Identifier&gt;
      &lt;Value&gt;{$input.in_FileNr  }&lt;/Value&gt;
   &lt;/Parameters&gt;
&lt;/PoSapStdOutput&gt;
</expression>
                              </operation>
                              <link id="lbbutxmn" targetId="lbbufnba"/>
                           </assignment>
                           <subflow id="lbbufnba">
                              <title>Process_P2B_Event_ErrorLog</title>
                              <subflowGUID>7N5uKhvv6kXg3zoRAbuggF</subflowGUID>
                              <subflowPath>Process_P2B_Event_ErrorLog</subflowPath>
                              <runForEach>false</runForEach>
                              <input>
                                 <parameter name="i_X_TRANSACTION_ID" source="field" updatable="true">input.in_X_TRANSACTION_ID</parameter>
                                 <parameter name="i_IICS_Run_ID" source="formula" updatable="true">
                                    <expression language="XQuery">'Parent='||$input.in_X_TRANSACTION_ID||'^FailureAt='||util:getProcessId()||'^'</expression>
                                 </parameter>
                                 <parameter name="i_Code" source="field" updatable="true">output.faultInfo[1]/code</parameter>
                                 <parameter name="i_Error" source="field" updatable="true">output.faultInfo[1]/reason</parameter>
                                 <parameter name="i_Description" source="field" updatable="true">output.faultInfo[1]/detail</parameter>
                                 <parameter name="i_APIName" source="field" updatable="true">input.in_ApiName</parameter>
                                 <parameter name="i_EventName" source="field" updatable="true">input.in_EventName</parameter>
                                 <parameter name="i_DataKey" source="formula" updatable="true">
                                    <expression language="XQuery">'HolderNr='||$input.in_HolderNr||'^FileNr='||$input.in_FileNr||'^'</expression>
                                 </parameter>
                                 <parameter name="i_IICSProcessname" source="formula" updatable="true">
                                    <expression language="XQuery">util:getAssetName()</expression>
                                 </parameter>
                                 <parameter name="i_FailedAtStep" source="constant" updatable="true">VPoint: Failed to download file (Base 64)</parameter>
                                 <parameter name="i_RestURL" source="formula" updatable="true">
                                    <expression language="XQuery">$temp.tmp_VPC_Hostname||
'/api/V8.0/DocumentManagement/Holders/Documents/'||
$input.in_HolderNr ||'/'||$input.in_FileNr ||'/download'</expression>
                                 </parameter>
                                 <parameter name="i_ProcessStartTime" source="field" updatable="true">input.in_ParentProcessStartTime</parameter>
                              </input>
                              <outputDef/>
                           </subflow>
                           <link id="lbbufnbg" targetId="lbbufnb6" type="containerLink"/>
                        </flow>
                        <link id="lbbufnbd" targetId="lbbufnb7" type="containerLink"/>
                        <events>
                           <catch faultField="faultInfo" id="latnpn8j" interrupting="true">
                              <link id="lbbufnbe" targetId="lbbufnb9" type="containerLink"/>
                           </catch>
                        </events>
                     </eventContainer>
                     <link id="lbbufmzx" targetId="lbbufmzs" type="containerLink"/>
                  </flow>
                  <flow id="lbbufmzz">
                     <eventContainer id="lbbutxb6">
                        <service id="lbbutwvx">
                           <title>Download Binary File from VPC</title>
                           <serviceName>AppSvcVpcDocumentManagement-v8:GET_File_Files</serviceName>
                           <serviceGUID>7H3QhWxWnzVfusEDt4618O</serviceGUID>
                           <serviceInput>
                              <parameter name="base_url" source="field" updatable="true">temp.tmp_VPC_Hostname</parameter>
                              <parameter name="access_token" source="field" updatable="true">output.out_vpc_token</parameter>
                              <parameter name="docField" source="field" updatable="true">input.in_DocFileId</parameter>
                           </serviceInput>
                        </service>
                        <flow id="lbbutxb8">
                           <assignment id="lbbutxf5">
                              <title>Set  Success Output</title>
                              <operation source="formula" to="output.out_DownloadDocsVPC_Feedback">
                                 <expression language="XQuery">&lt;PoSapStdOutput&gt;
   &lt;HttpStatusCode&gt;{$output.o_Svc_http_ResponseCode  }&lt;/HttpStatusCode&gt;
   &lt;Detail&gt;Download Successful&lt;/Detail&gt;
   &lt;Reason&gt;&lt;/Reason&gt;
   &lt;Parameters&gt;
      &lt;Identifier&gt;TechnicalFormat&lt;/Identifier&gt;
      &lt;Value&gt;Binary&lt;/Value&gt;
   &lt;/Parameters&gt;
   &lt;Parameters&gt;
      &lt;Identifier&gt;DocFileId&lt;/Identifier&gt;
      &lt;Value&gt;{$input.in_DocFileId   }&lt;/Value&gt;
   &lt;/Parameters&gt;
&lt;/PoSapStdOutput&gt;
</expression>
                              </operation>
                              <operation source="field" to="output.out_Doc_Binary">output.o_docFile</operation>
                           </assignment>
                           <link id="lbbutxb9" targetId="lbbutxb6" type="containerLink"/>
                        </flow>
                        <flow id="lbbutxbb">
                           <assignment id="lbbutxhu">
                              <title>Set Failure Output</title>
                              <operation source="formula" to="output.out_DownloadDocsVPC_Feedback">
                                 <expression language="XQuery">&lt;PoSapStdOutput&gt;
   &lt;HttpStatusCode&gt;{$output.faultInfo[1]/code }&lt;/HttpStatusCode&gt;
   &lt;Detail&gt;{$output.faultInfo[1]/detail}&lt;/Detail&gt;
   &lt;Reason&gt;{$output.faultInfo[1]/reason}&lt;/Reason&gt;
   &lt;Parameters&gt;
      &lt;Identifier&gt;HolderNr&lt;/Identifier&gt;
      &lt;Value&gt;{$input.in_HolderNr  }&lt;/Value&gt;
   &lt;/Parameters&gt;
   &lt;Parameters&gt;
      &lt;Identifier&gt;FileNr&lt;/Identifier&gt;
      &lt;Value&gt;{$input.in_FileNr  }&lt;/Value&gt;
   &lt;/Parameters&gt;
&lt;/PoSapStdOutput&gt;
</expression>
                              </operation>
                              <link id="lbbutxqm" targetId="lbbutxql"/>
                           </assignment>
                           <subflow id="lbbutxql">
                              <title>Process_P2B_Event_ErrorLog 1</title>
                              <subflowGUID>7N5uKhvv6kXg3zoRAbuggF</subflowGUID>
                              <subflowPath>Process_P2B_Event_ErrorLog</subflowPath>
                              <runForEach>false</runForEach>
                              <input>
                                 <parameter name="i_X_TRANSACTION_ID" source="field" updatable="true">input.in_X_TRANSACTION_ID</parameter>
                                 <parameter name="i_IICS_Run_ID" source="formula" updatable="true">
                                    <expression language="XQuery">'Parent='||$input.in_X_TRANSACTION_ID||'^FailureAt='||util:getProcessId()||'^'</expression>
                                 </parameter>
                                 <parameter name="i_Code" source="field" updatable="true">output.faultInfo[1]/code</parameter>
                                 <parameter name="i_Error" source="field" updatable="true">output.faultInfo[1]/reason</parameter>
                                 <parameter name="i_Description" source="field" updatable="true">output.faultInfo[1]/detail</parameter>
                                 <parameter name="i_APIName" source="field" updatable="true">input.in_ApiName</parameter>
                                 <parameter name="i_EventName" source="field" updatable="true">input.in_EventName</parameter>
                                 <parameter name="i_DataKey" source="formula" updatable="true">
                                    <expression language="XQuery">'HolderNr='||$input.in_HolderNr||'^FileNr='||$input.in_FileNr||'^'</expression>
                                 </parameter>
                                 <parameter name="i_IICSProcessname" source="formula" updatable="true">
                                    <expression language="XQuery">util:getAssetName()</expression>
                                 </parameter>
                                 <parameter name="i_FailedAtStep" source="constant" updatable="true">VPoint: Failed to download file (Base 64)</parameter>
                                 <parameter name="i_RestURL" source="formula" updatable="true">
                                    <expression language="XQuery">$temp.tmp_VPC_Hostname||
'/api/V8.0/DocumentManagement/Holders/Documents/'||
$input.in_HolderNr ||'/'||$input.in_FileNr ||'/download'</expression>
                                 </parameter>
                                 <parameter name="i_ProcessStartTime" source="field" updatable="true">input.in_ParentProcessStartTime</parameter>
                              </input>
                              <outputDef/>
                           </subflow>
                           <link id="lbbutxbc" targetId="lbbutxb6" type="containerLink"/>
                        </flow>
                        <link id="lbbutxb7" targetId="lbbutxb8" type="containerLink"/>
                        <events>
                           <catch faultField="faultInfo" id="lbbutxb5" interrupting="true">
                              <link id="lbbutxba" targetId="lbbutxbb" type="containerLink"/>
                           </catch>
                        </events>
                     </eventContainer>
                     <link id="lbbufn00" targetId="lbbufmzs" type="containerLink"/>
                  </flow>
                  <flow id="lbbufnai">
                     <assignment id="lbbutxyn">
                        <title>Set Failure Output</title>
                        <operation source="formula" to="output.out_DownloadDocsVPC_Feedback">
                           <expression language="XQuery">&lt;PoSapStdOutput&gt;
   &lt;HttpStatusCode&gt;405&lt;/HttpStatusCode&gt;
   &lt;Detail&gt;The document output format could not be determined. Please specify [Binary] or [Base64] in the field [$input.in_DocFormat]&lt;/Detail&gt;
   &lt;Reason&gt;Method Not Allowed&lt;/Reason&gt;
&lt;/PoSapStdOutput&gt;
</expression>
                        </operation>
                     </assignment>
                     <link id="lbbufnaj" targetId="lbbufmzs" type="containerLink"/>
                  </flow>
                  <link id="lbbufmzv" targetId="lbbufmzw" type="containerLink">
                     <condition source="formula">
                        <function name="string-equals">
                           <arg name="left">{$input.in_DocFormat}</arg>
                           <arg name="right">Base64</arg>
                        </function>
                     </condition>
                  </link>
                  <link id="lbbufmzy" targetId="lbbufmzz" type="containerLink">
                     <condition source="formula">
                        <function name="string-equals">
                           <arg name="left">{$input.in_DocFormat}</arg>
                           <arg name="right">Binary</arg>
                        </function>
                     </condition>
                  </link>
                  <link id="lbbufnah" targetId="lbbufnai" type="containerLink"/>
                  <link id="lbbufnb5" targetId="lbbufmr4"/>
               </container>
               <end id="lbbufmr4">
                  <title>End 1</title>
               </end>
            </flow>
         </process>
         <ns1:sample-data-sets xmlns:ns1="http://schemas.active-endpoints.com/appmodules/repository/2010/10/sampleData.xsd">
            <ns1:SampleData>
               <ns1:Id>991fdd3f-5a2a-4d43-bd48-aafadd6586a5</ns1:Id>
               <ns1:Name>t1</ns1:Name>
               <ns1:CreatedBy>Rudolph.Boshoff.TST</ns1:CreatedBy>
               <ns1:CreationDate>2022-12-16T08:04:37Z</ns1:CreationDate>
               <ns1:ModifiedBy>Rudolph.Boshoff.TST</ns1:ModifiedBy>
               <ns1:ModificationDate>2023-01-06T13:05:24Z</ns1:ModificationDate>
               <ns1:Data format="json">{
	 "in_X_TRANSACTION_ID": "RBTEST_20221206",
	 "in_EventName": "Manual Input",
	 "in_IICS_Process_ID": "123",
	 "in_ApiName": "API-18",
	 "in_DocFormat": "",
	 "in_HolderNr": "40",
	 "in_DocFileId": "",
	 "in_FileNr": "1"
}</ns1:Data>
            </ns1:SampleData>
            <ns1:SampleData>
               <ns1:Id>a875cb64-cace-42bd-a335-d157067b6e0e</ns1:Id>
               <ns1:Name>t2_Binary</ns1:Name>
               <ns1:CreatedBy>Rudolph.Boshoff.TST</ns1:CreatedBy>
               <ns1:CreationDate>2022-12-16T08:04:36Z</ns1:CreationDate>
               <ns1:ModifiedBy>Rudolph.Boshoff.TST</ns1:ModifiedBy>
               <ns1:ModificationDate>2023-01-06T13:05:24Z</ns1:ModificationDate>
               <ns1:Data format="json">{
	 "in_X_TRANSACTION_ID": "RBTEST_20221206",
	 "in_EventName": "Manual Input",
	 "in_IICS_Process_ID": "123",
	 "in_ApiName": "API-18",
	 "in_DocFormat": "Binary",
	 "in_HolderNr": "40",
	 "in_DocFileId": "226",
	 "in_FileNr": "1"
}</ns1:Data>
            </ns1:SampleData>
         </ns1:sample-data-sets>
      </types1:Entry>
      <types1:GUID>16yWNyWQZU0lAIDPuuhi6C</types1:GUID>
      <types1:DisplayName>Process_DownloadDocsVPC_Single</types1:DisplayName>
   </types1:Item>
   <types1:CurrentServerDateTime>2023-01-07T18:44:30.829Z</types1:CurrentServerDateTime>
</aetgt:getResponse>
