<aetgt:getResponse xmlns:aetgt="http://schemas.active-endpoints.com/appmodules/repository/2010/10/avrepository.xsd"
                   xmlns:types1="http://schemas.active-endpoints.com/appmodules/repository/2010/10/avrepository.xsd">
   <types1:Item>
      <types1:EntryId>mfWdvSzYLnzYLnz-gt-3226504-2023-01-27T12:28:13.202Z::pd.xml</types1:EntryId>
      <types1:Name>Prc_gettoken_MR-1</types1:Name>
      <types1:MimeType>application/xml+process</types1:MimeType>
      <types1:Description/>
      <types1:AppliesTo/>
      <types1:Tags>.agent:VIP_IICS_SA_SG_ONPREM_GROUP,.anonymous</types1:Tags>
      <types1:VersionLabel>1.0</types1:VersionLabel>
      <types1:State>CURRENT</types1:State>
      <types1:ProcessGroup/>
      <types1:CreatedBy>mohsin.shah@vistra.com.SAML2</types1:CreatedBy>
      <types1:CreationDate>2023-01-27T12:28:13Z</types1:CreationDate>
      <types1:ModifiedBy>mohsin.shah@vistra.com.SAML2</types1:ModifiedBy>
      <types1:ModificationDate>2023-02-23T12:12:27Z</types1:ModificationDate>
      <types1:PublicationStatus>published</types1:PublicationStatus>
      <types1:PublishedBy>mohsin.shah@vistra.com.SAML2</types1:PublishedBy>
      <types1:PublicationDate>2023-02-23T12:12:38Z</types1:PublicationDate>
      <types1:PublishedContributionId>project:/spi.Prc_gettoken_MR-1/Prc_gettoken_MR-1.pd.xml</types1:PublishedContributionId>
      <types1:AutosaveExists>false</types1:AutosaveExists>
      <types1:Entry>
         <process xmlns="http://schemas.active-endpoints.com/appmodules/screenflow/2010/10/avosScreenflow.xsd"
                  xmlns:tfm="http://schemas.active-endpoints.com/appmodules/screenflow/2021/04/taskflowModel.xsd"
                  xmlns:list="urn:activevos:spi:list:functions"
                  displayName="Prc_gettoken_MR"
                  name="Prc_gettoken_MR-1"
                  overrideAPIName="false">
            <parameterSet xmlns="http://schemas.active-endpoints.com/appmodules/screenflow/2021/04/taskflowModel.xsd"/>
            <appliesTo/>
            <description/>
            <tags>.agent:VIP_IICS_SA_SG_ONPREM_GROUP,.anonymous</tags>
            <generator>Informatica Process Designer 11</generator>
            <output>
               <field description="" name="o_Token" type="string">
                  <options>
                     <option name="required">false</option>
                  </options>
               </field>
            </output>
            <tempFields>
               <field description="" name="t_Token" type="string">
                  <options>
                     <option name="required">false</option>
                  </options>
               </field>
               <field description="" name="t_Var" type="string">
                  <options>
                     <option name="required">false</option>
                  </options>
               </field>
               <field description="" name="t_Email_input" type="reference">
                  <options>
                     <option name="referenceTo">AppConn-Email-MR-1:EmailTaskInput</option>
                     <option name="required">false</option>
                     <option name="isCopy">true</option>
                     <option name="guid">02FzkGkS2jWiMRMKWCsPgF</option>
                  </options>
               </field>
            </tempFields>
            <notes/>
            <deployment skipIfRunning="false" suspendOnFault="false" tracingLevel="normal">
               <targetLocation>VIP_IICS_SA_SG_ONPREM_GROUP</targetLocation>
               <rest>
                  <allowAnonymousAccess/>
               </rest>
            </deployment>
            <flow id="a">
               <start id="b">
                  <link id="l63dwcvo" targetId="l63dwcvn"/>
               </start>
               <service id="l63dwcvn">
                  <title>Run a Shell Command</title>
                  <serviceName>avShellService</serviceName>
                  <serviceGUID/>
                  <serviceInput>
                     <parameter name="command" source="constant">E:\data\SrcFiles\MailRoom\CurlScript\gettoken_uat_vsearch.bat</parameter>
                     <parameter name="workingDirPath" source="constant">C:</parameter>
                  </serviceInput>
                  <link id="l63dwczd" targetId="l63dwczc"/>
               </service>
               <container id="l63dwczc" type="exclusive">
                  <title>Response Code</title>
                  <flow id="l63dwczg">
                     <assignment id="l63dwczu">
                        <title>Assignment to t_Var</title>
                        <operation source="field" to="temp.t_Var">output.outputString</operation>
                        <link id="l63iec9s" targetId="l63iec9r"/>
                     </assignment>
                     <assignment id="l63iec9r">
                        <title>Assignment to o_Token, t_Token</title>
                        <operation source="formula" to="output.o_Token">
                           <expression language="XQuery">fn:substring-before(fn:substring-after($temp.t_Var,'access_token":"'),'","token_type')</expression>
                        </operation>
                        <operation source="formula" to="temp.t_Token">
                           <expression language="XQuery">fn:string-length($output.o_Token)</expression>
                        </operation>
                        <link id="lcymzhvu" targetId="lcymzhvt"/>
                     </assignment>
                     <container id="lcymzhvt" type="exclusive">
                        <title>t_Token</title>
                        <flow id="lcymzhvw">
                           <assignment id="lcymzhz6">
                              <title>Assignment to Recipient Addresses, Subject etc.</title>
                              <operation source="constant" to="temp.t_Email_input[1]/to">VIP-IICSTeam@vistra.com;BotSupport@vistra.com;Meghana.Jadhav@vistra.com</operation>
                              <operation source="constant" to="temp.t_Email_input[1]/subject">Unable to connect to Vpoint</operation>
                              <operation source="formula" to="temp.t_Email_input[1]/body">
                                 <expression language="XQuery">fn:concat('Hi Team,','&amp;#10;','&amp;#10;', 'Mailroom Document Store Process Failed due to “E09 – Unable to connect to Vpoint”', '&amp;#10;' ,'&amp;#10;','&amp;#10;','Thanks','&amp;#10;', 'VIP Team','&amp;#10;','&amp;#10;')</expression>
                              </operation>
                              <link id="lcymzi0k" targetId="lcymzi0j"/>
                           </assignment>
                           <service id="lcymzi0j">
                              <title>sendEmailService</title>
                              <serviceName>AppConn-Email-MR-1:sendEmailService</serviceName>
                              <serviceGUID>02FzkGkS2jWiMRMKWCsPgF</serviceGUID>
                              <serviceInput>
                                 <parameter name="emailTaskInput" source="field" updatable="true">temp.t_Email_input</parameter>
                              </serviceInput>
                              <link id="lcymzi1s" targetId="lcymzi1r"/>
                           </service>
                           <throw id="lcymzi1r">
                              <title>Throw 2</title>
                              <throwInput>
                                 <parameter name="code" source="constant" updatable="true">E09</parameter>
                                 <parameter name="detail" source="constant" updatable="true">Unable to connect to Vpoint</parameter>
                                 <parameter name="reason" source="field" updatable="true">output.outputString</parameter>
                              </throwInput>
                           </throw>
                        </flow>
                        <flow id="lcymzhvz">
                           <end id="lcymzi1f"/>
                        </flow>
                        <link id="lcymzhvv" targetId="lcymzhvw" type="containerLink">
                           <condition source="formula">
                              <function name="string-equals">
                                 <arg name="left">{$temp.t_Token}</arg>
                                 <arg name="right">0</arg>
                              </function>
                           </condition>
                        </link>
                        <link id="lcymzhvy" targetId="lcymzhvz" type="containerLink"/>
                     </container>
                  </flow>
                  <flow id="l63dwczj">
                     <throw id="lb62tnvr">
                        <title>Throw 1</title>
                        <throwInput>
                           <parameter name="code" source="constant" updatable="true">E09</parameter>
                           <parameter name="detail" source="constant" updatable="true">Unable to connect to Vpoint</parameter>
                           <parameter name="reason" source="field" updatable="true">output.errorString</parameter>
                        </throwInput>
                     </throw>
                  </flow>
                  <link id="l63dwczf" targetId="l63dwczg" type="containerLink">
                     <condition source="formula">
                        <function name="contains">
                           <arg name="left">{$output.responseCode}</arg>
                           <arg name="right">0</arg>
                        </function>
                     </condition>
                  </link>
                  <link id="l63dwczi" targetId="l63dwczj" type="containerLink"/>
               </container>
            </flow>
         </process>
         <ns1:sample-data-sets xmlns:ns1="http://schemas.active-endpoints.com/appmodules/repository/2010/10/sampleData.xsd">
            <ns1:SampleData>
               <ns1:Id>5bb95c37-357d-469e-a3b6-f1942967f590</ns1:Id>
               <ns1:Name>input</ns1:Name>
               <ns1:CreatedBy>mohsin.shah@vistra.com.SAML2</ns1:CreatedBy>
               <ns1:CreationDate>2023-01-27T12:28:13Z</ns1:CreationDate>
               <ns1:ModifiedBy>mohsin.shah@vistra.com.SAML2</ns1:ModifiedBy>
               <ns1:ModificationDate>2023-01-27T12:28:13Z</ns1:ModificationDate>
               <ns1:Data format="json">{}</ns1:Data>
            </ns1:SampleData>
         </ns1:sample-data-sets>
      </types1:Entry>
      <types1:GUID>aV4qDpGlVk2epRV2kcfv6m</types1:GUID>
      <types1:DisplayName>Prc_gettoken_MR</types1:DisplayName>
   </types1:Item>
   <types1:CurrentServerDateTime>2023-02-23T12:15:46.034Z</types1:CurrentServerDateTime>
</aetgt:getResponse>
