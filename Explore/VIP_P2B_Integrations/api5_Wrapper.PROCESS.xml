<aetgt:getResponse xmlns:aetgt="http://schemas.active-endpoints.com/appmodules/repository/2010/10/avrepository.xsd"
                   xmlns:types1="http://schemas.active-endpoints.com/appmodules/repository/2010/10/avrepository.xsd">
   <types1:Item>
      <types1:EntryId>qclNE6Eaaaaaaaa-gt-20541332-2022-10-12T10:48:22.265Z::pd.xml</types1:EntryId>
      <types1:Name>api5_Wrapper</types1:Name>
      <types1:MimeType>application/xml+process</types1:MimeType>
      <types1:Description>Wrapper process which invokes API5 (Invoice payment clearance posting) processes</types1:Description>
      <types1:AppliesTo/>
      <types1:Tags>.agent:VIP_IICS_SA_SG_ONPREM_GROUP,.anonymous</types1:Tags>
      <types1:VersionLabel>1.0</types1:VersionLabel>
      <types1:State>CURRENT</types1:State>
      <types1:ProcessGroup/>
      <types1:CreatedBy>veerabh-vistra-tst</types1:CreatedBy>
      <types1:CreationDate>2022-10-12T10:48:22Z</types1:CreationDate>
      <types1:ModifiedBy>Rudolph.Boshoff.TST</types1:ModifiedBy>
      <types1:ModificationDate>2023-07-25T09:33:56Z</types1:ModificationDate>
      <types1:PublicationStatus>out-of-date</types1:PublicationStatus>
      <types1:PublishedBy>Rudolph.Boshoff.TST</types1:PublishedBy>
      <types1:PublicationDate>2023-07-25T09:34:39Z</types1:PublicationDate>
      <types1:PublishedContributionId>project:/spi.api5_Wrapper/api5_Wrapper.pd.xml</types1:PublishedContributionId>
      <types1:AutosaveExists>false</types1:AutosaveExists>
      <types1:Entry>
         <process xmlns="http://schemas.active-endpoints.com/appmodules/screenflow/2010/10/avosScreenflow.xsd"
                  xmlns:tfm="http://schemas.active-endpoints.com/appmodules/screenflow/2021/04/taskflowModel.xsd"
                  xmlns:list="urn:activevos:spi:list:functions"
                  displayName="api5_Wrapper"
                  name="api5_Wrapper"
                  overrideAPIName="false">
            <parameterSet xmlns="http://schemas.active-endpoints.com/appmodules/screenflow/2021/04/taskflowModel.xsd"/>
            <appliesTo/>
            <description>Wrapper process which invokes API5 (Invoice payment clearance posting) processes</description>
            <tags>.agent:VIP_IICS_SA_SG_ONPREM_GROUP,.anonymous</tags>
            <generator>Informatica Process Designer 11</generator>
            <tempFields>
               <field description="" name="tmp_hostname_SAP" type="string">
                  <options>
                     <option name="required">false</option>
                     <option name="initialvalue">https://my305570-api.s4hana.ondemand.com</option>
                  </options>
               </field>
               <field description="" name="tmp_username_SAP" type="string">
                  <options>
                     <option name="required">false</option>
                     <option name="initialvalue">VIEW_POINT_CLOUD_Q</option>
                  </options>
               </field>
               <field description="" name="tmp_password_SAP" type="string">
                  <options>
                     <option name="required">false</option>
                     <option name="initialvalue">xTQXVaJPZah}lrCjN5KLridzayxjoRPmxFQougkl</option>
                  </options>
               </field>
               <field description="" name="tmp_vpc_username" type="string">
                  <options>
                     <option name="required">false</option>
                  </options>
               </field>
               <field description="" name="tmp_vpc_password" type="string">
                  <options>
                     <option name="required">false</option>
                  </options>
               </field>
               <field description="" name="tmp_vpc_host" type="string">
                  <options>
                     <option name="required">false</option>
                  </options>
               </field>
               <field description="" name="tmp_vpc_api_input" type="string">
                  <options>
                     <option name="required">false</option>
                  </options>
               </field>
               <field description="" name="tmp_ProcessStartTime" type="datetime">
                  <options>
                     <option name="thirtyMinutesIncrement">true</option>
                     <option name="required">false</option>
                  </options>
               </field>
               <field description="" name="tmp_X_TRANSACTION_ID" type="string">
                  <options>
                     <option name="required">false</option>
                  </options>
               </field>
               <field description="" name="tmp_EventName" type="string">
                  <options>
                     <option name="required">false</option>
                  </options>
               </field>
               <field description="" name="tmp_IICS_Process_ID" type="string">
                  <options>
                     <option name="required">false</option>
                  </options>
               </field>
               <field description="" name="tmp_ApiName" type="string">
                  <options>
                     <option name="required">false</option>
                  </options>
               </field>
               <field description="" name="tmp_ClearedPaymentEntry" type="reference">
                  <options>
                     <option name="referenceTo">$po:$any</option>
                     <option name="required">false</option>
                     <option name="isCopy">true</option>
                  </options>
               </field>
               <field description="" name="tmp_ReadCount" type="int">
                  <options>
                     <option name="required">false</option>
                     <option name="initialvalue">0</option>
                  </options>
               </field>
               <field description="" name="tmp_TokenSetFlag" type="boolean">
                  <options>
                     <option name="defaultvalue">false</option>
                     <option name="boolean_show_as">checkbox</option>
                     <option name="required">false</option>
                  </options>
               </field>
            </tempFields>
            <notes/>
            <deployment skipIfRunning="false" suspendOnFault="false" tracingLevel="verbose">
               <targetLocation>VIP_IICS_SA_SG_ONPREM_GROUP</targetLocation>
               <rest>
                  <allowAnonymousAccess/>
               </rest>
            </deployment>
            <flow id="a">
               <start id="b">
                  <link id="l7owvrbo" targetId="l7owvrbn"/>
               </start>
               <assignment id="l7owvrbn">
                  <title>Set Parent Process attributes</title>
                  <operation source="formula" to="temp.tmp_ProcessStartTime">
                     <expression language="XQuery">fn:current-dateTime()</expression>
                  </operation>
                  <operation source="formula" to="temp.tmp_X_TRANSACTION_ID">
                     <expression language="XQuery">fn:concat('API05_', date:toChar($temp.tmp_ProcessStartTime, 'YYYYMMDDHH24MISS'))</expression>
                  </operation>
                  <operation source="constant" to="temp.tmp_ApiName">API05 - Payment Clearance</operation>
                  <operation source="constant" to="temp.tmp_EventName">Batch of API05</operation>
                  <operation source="formula" to="temp.tmp_IICS_Process_ID">
                     <expression language="XQuery">util:getProcessId()</expression>
                  </operation>
                  <link id="l7owvrbp" targetId="kw3flc8d"/>
               </assignment>
               <assignment id="kw3flc8d">
                  <title>URN Mapping</title>
                  <operation source="formula" to="temp.tmp_vpc_host">
                     <expression language="XQuery">util:resolveURN('URN_VPC_Hostname')</expression>
                  </operation>
                  <operation source="formula" to="temp.tmp_vpc_password">
                     <expression language="XQuery">util:resolveURN('URN_VPC_Pwd')</expression>
                  </operation>
                  <operation source="formula" to="temp.tmp_vpc_username">
                     <expression language="XQuery">util:resolveURN('URN_VPC_Username')</expression>
                  </operation>
                  <operation source="formula" to="temp.tmp_hostname_SAP">
                     <expression language="XQuery">util:resolveURN('URN_SAP_Hostname')</expression>
                  </operation>
                  <operation source="formula" to="temp.tmp_password_SAP">
                     <expression language="XQuery">util:resolveURN('URN_SAP_Pwd')</expression>
                  </operation>
                  <operation source="formula" to="temp.tmp_username_SAP">
                     <expression language="XQuery">util:resolveURN('URN_SAP_Username')</expression>
                  </operation>
                  <link id="l7owvrbe" targetId="l7owvto8"/>
               </assignment>
               <assignment id="l7syo86y">
                  <title>Set SAP Payments read count</title>
                  <operation source="formula" to="temp.tmp_ReadCount">
                     <expression language="XQuery">util:iif($output.o_HttpResponseStatusCode = '200'
	, fn:sum( 	for $i in $output.o_ClearedPaymentEntries_Array
				return 
                xs:integer(
                		  (:Rudolph Boshoff 2023-07-14 Jira Bug:VR-3554
                            fn:not(fn:empty($i/ClearingAccountingDocument)):)
                            fn:not(fn:empty($i/ClearingJournalEntry))
                       and 	fn:not(fn:empty($i/AccountingDocument))
                       	   )
             ), 0)</expression>
                  </operation>
                  <link id="l7syo88j" targetId="l7syo88i"/>
               </assignment>
               <assignment id="l833neu8">
                  <title>Check if Token is Set</title>
                  <operation source="formula" to="temp.tmp_TokenSetFlag">
                     <expression language="XQuery">util:iif(util:isNull($output.out_vpc_token ), fn:false(), fn:true())</expression>
                  </operation>
                  <link id="l833neua" targetId="l833nepd"/>
               </assignment>
               <eventContainer id="l7owvto8">
                  <subflow id="l7owvoy8">
                     <title>Fetch ClearedPayments from SAP</title>
                     <subflowGUID>66c6WhvbPYUlsygmuwOsKk</subflowGUID>
                     <subflowPath>Process_GET_YY1_ClearedPaymentEntries</subflowPath>
                     <runForEach>false</runForEach>
                     <input>
                        <parameter name="in_X_TRANSACTION_ID" source="field" updatable="true">temp.tmp_X_TRANSACTION_ID</parameter>
                        <parameter name="in_EventName" source="field" updatable="true">temp.tmp_EventName</parameter>
                        <parameter name="in_IICS_Process_ID" source="field" updatable="true">temp.tmp_IICS_Process_ID</parameter>
                        <parameter name="in_ParentProcessStartTime" source="field" updatable="true">temp.tmp_ProcessStartTime</parameter>
                        <parameter name="in_ApiName" source="field" updatable="true">temp.tmp_ApiName</parameter>
                        <parameter name="in_Body" source="formula" updatable="true">
                           <expression language="XQuery">'N/A'</expression>
                        </parameter>
                     </input>
                     <outputDef>
                        <field name="o_ClearedPaymentEntries_Array" type="objectlist">
                           <options>
                              <option name="referenceTo">$po:$any</option>
                              <option hide="true" name="multiSelect">true</option>
                              <option name="required">false</option>
                              <option name="isCopy">true</option>
                           </options>
                        </field>
                        <field name="o_HttpResponseStatusCode" type="string">
                           <options>
                              <option name="required">false</option>
                           </options>
                        </field>
                     </outputDef>
                  </subflow>
                  <flow id="l7owvtoa">
                     <link id="l7owvtob" targetId="l7owvto8" type="containerLink"/>
                  </flow>
                  <flow id="l7owvtod">
                     <subflow id="l7owvtvo">
                        <title>Log GetData Error</title>
                        <subflowGUID>7N5uKhvv6kXg3zoRAbuggF</subflowGUID>
                        <subflowPath>Process_P2B_Event_ErrorLog</subflowPath>
                        <runForEach>false</runForEach>
                        <input>
                           <parameter name="i_X_TRANSACTION_ID" source="field" updatable="true">temp.tmp_X_TRANSACTION_ID</parameter>
                           <parameter name="i_IICS_Run_ID" source="field" updatable="true">temp.tmp_IICS_Process_ID</parameter>
                           <parameter name="i_Code" source="field" updatable="true">output.getData-faultInfo[1]/code</parameter>
                           <parameter name="i_Error" source="field" updatable="true">output.getData-faultInfo[1]/reason</parameter>
                           <parameter name="i_Description" source="field" updatable="true">output.getData-faultInfo[1]/detail</parameter>
                           <parameter name="i_APIName" source="field" updatable="true">temp.tmp_ApiName</parameter>
                           <parameter name="i_EventName" source="field" updatable="true">temp.tmp_EventName</parameter>
                           <parameter name="i_DataKey" source="constant" updatable="true">Bulk data extraction from SAP failed</parameter>
                           <parameter name="i_IICSProcessname" source="formula" updatable="true">
                              <expression language="XQuery">util:getAssetName()</expression>
                           </parameter>
                           <parameter name="i_FailedAtStep" source="constant" updatable="true">SAP : GET Cleared Payment entries</parameter>
                           <parameter name="i_RestURL" source="formula" updatable="true">
                              <expression language="XQuery">util:resolveURN('URN_SAP_Hostname')||'/sap/opu/odata/sap/YY1_PAYMENTCLEARED_API_V1_CDS/YY1_PaymentCleared_API_v1'</expression>
                           </parameter>
                           <parameter name="i_RequestPayload" source="formula" updatable="true">
                              <expression language="XQuery">'N/A'</expression>
                           </parameter>
                           <parameter name="i_HelpFileLInk" source="constant" updatable="true">N/A (Custom API)</parameter>
                           <parameter name="i_ProcessStartTime" source="field" updatable="true">temp.tmp_ProcessStartTime</parameter>
                        </input>
                        <outputDef/>
                        <link id="l7psizpo" targetId="l7psizpn"/>
                     </subflow>
                     <end id="l7psizpn">
                        <title>End Data Retrieval Failure</title>
                     </end>
                  </flow>
                  <link id="l7owvto9" targetId="l7owvtoa" type="containerLink"/>
                  <link id="l7syo86z" targetId="l7syo86y"/>
                  <events>
                     <catch faultField="getData-faultInfo" id="l7owvsbd" interrupting="true">
                        <link id="l7owvtoc" targetId="l7owvtod" type="containerLink"/>
                     </catch>
                  </events>
               </eventContainer>
               <container id="l7syo88i" type="exclusive">
                  <title>SAP Payments read count</title>
                  <flow id="l7syo88m">
                     <link id="l7syo88n" targetId="l7syo88i" type="containerLink"/>
                  </flow>
                  <flow id="l7syo88p">
                     <end id="l7syo8uy">
                        <title>End No data read from SAP</title>
                     </end>
                  </flow>
                  <link id="l7syo88l" targetId="l7syo88m" type="containerLink">
                     <condition source="formula">
                        <function name="greater-than">
                           <arg name="left">{$temp.tmp_ReadCount}</arg>
                           <arg name="right">{0}</arg>
                        </function>
                     </condition>
                  </link>
                  <link id="l7syo88o" targetId="l7syo88p" type="containerLink"/>
                  <link id="l7syo88k" targetId="l7psiy8v"/>
               </container>
               <container id="l7psiy8v" type="exclusive">
                  <title>Current User</title>
                  <flow id="l7psiy8w">
                     <link id="l7psiy91" targetId="l7psiy8v" type="containerLink"/>
                  </flow>
                  <flow id="l7psiy8x">
                     <eventContainer id="l833nfk3">
                        <subflow id="l7psiy8y">
                           <title>VPC Get Token</title>
                           <subflowGUID>07bmeP8qUUzjnAwYUaz46x</subflowGUID>
                           <subflowPath>P_VPC_GetToken-2</subflowPath>
                           <runForEach>false</runForEach>
                           <input/>
                           <outputDef>
                              <field name="out_vpc_token" type="string">
                                 <options>
                                    <option name="required">false</option>
                                 </options>
                              </field>
                           </outputDef>
                        </subflow>
                        <flow id="l833nfk5">
                           <link id="l833nfk6" targetId="l833nfk3" type="containerLink"/>
                        </flow>
                        <flow id="l833nfk8">
                           <subflow id="l833nfrx">
                              <title>Log GetVPCToken Error</title>
                              <subflowGUID>7N5uKhvv6kXg3zoRAbuggF</subflowGUID>
                              <subflowPath>Process_P2B_Event_ErrorLog</subflowPath>
                              <runForEach>false</runForEach>
                              <input>
                                 <parameter name="i_X_TRANSACTION_ID" source="field" updatable="true">temp.tmp_X_TRANSACTION_ID</parameter>
                                 <parameter name="i_IICS_Run_ID" source="field" updatable="true">temp.tmp_IICS_Process_ID</parameter>
                                 <parameter name="i_Code" source="field" updatable="true">output.VPCGetToken-faultInfo[1]/code</parameter>
                                 <parameter name="i_Error" source="field" updatable="true">output.VPCGetToken-faultInfo[1]/reason</parameter>
                                 <parameter name="i_Description" source="field" updatable="true">output.VPCGetToken-faultInfo[1]/detail</parameter>
                                 <parameter name="i_APIName" source="field" updatable="true">temp.tmp_ApiName</parameter>
                                 <parameter name="i_EventName" source="field" updatable="true">temp.tmp_EventName</parameter>
                                 <parameter name="i_DataKey" source="constant" updatable="true">Get VPC Token failed</parameter>
                                 <parameter name="i_IICSProcessname" source="formula" updatable="true">
                                    <expression language="XQuery">util:getAssetName()</expression>
                                 </parameter>
                                 <parameter name="i_FailedAtStep" source="constant" updatable="true">VPC : GET Token</parameter>
                                 <parameter name="i_RestURL" source="constant" updatable="true">N/A</parameter>
                                 <parameter name="i_RequestPayload" source="formula" updatable="true">
                                    <expression language="XQuery">'N/A'</expression>
                                 </parameter>
                                 <parameter name="i_HelpFileLInk" source="constant" updatable="true">N/A</parameter>
                                 <parameter name="i_ProcessStartTime" source="field" updatable="true">temp.tmp_ProcessStartTime</parameter>
                              </input>
                              <outputDef/>
                           </subflow>
                           <link id="l833nfk9" targetId="l833nfk3" type="containerLink"/>
                        </flow>
                        <link id="l833nfk4" targetId="l833nfk5" type="containerLink"/>
                        <events>
                           <catch faultField="VPCGetToken-faultInfo"
                                  id="l833nfjz"
                                  interrupting="true">
                              <link id="l833nfk7" targetId="l833nfk8" type="containerLink"/>
                           </catch>
                        </events>
                     </eventContainer>
                     <link id="l7psiy92" targetId="l7psiy8v" type="containerLink"/>
                  </flow>
                  <link id="l7psiy8z" targetId="l7psiy8w" type="containerLink">
                     <condition source="formula">
                        <function name="contains">
                           <arg name="left">{$input.CurrentUser}</arg>
                           <arg name="right">FORCE INVALID</arg>
                        </function>
                     </condition>
                  </link>
                  <link id="l7psiy90" targetId="l7psiy8x" type="containerLink"/>
                  <link id="l833neu9" targetId="l833neu8"/>
               </container>
               <container id="l833nepd" type="exclusive">
                  <title>Token Set ?</title>
                  <flow id="l833neph">
                     <container id="l833nfc8" type="exclusive">
                        <title>Next Payment entry ?</title>
                        <flow id="l833nfc9">
                           <assignment id="l833nfca">
                              <title>Pick a Payment entry for Processing</title>
                              <operation source="formula" to="temp.tmp_ClearedPaymentEntry">
                                 <expression language="XQuery">list:head($output.o_ClearedPaymentEntries_Array )</expression>
                              </operation>
                              <link id="l833nfcn" targetId="l833nfcb"/>
                           </assignment>
                           <assignment id="l833nfch">
                              <title>Move to Next Payment entry</title>
                              <operation source="formula" to="output.o_ClearedPaymentEntries_Array">
                                 <expression language="XQuery">list:tail($output.o_ClearedPaymentEntries_Array )</expression>
                              </operation>
                           </assignment>
                           <eventContainer id="l833nfcb">
                              <subflow id="l833nfcg">
                                 <title>Post Receipt to VPoint</title>
                                 <subflowGUID>92c3nzAvT5hguX4qVTErIz</subflowGUID>
                                 <subflowPath>api5</subflowPath>
                                 <runForEach>false</runForEach>
                                 <input>
                                    <parameter name="in_VPC_Token" source="field" updatable="true">output.out_vpc_token</parameter>
                                    <parameter name="in_ClearedPaymentEntry" source="field" updatable="true">temp.tmp_ClearedPaymentEntry</parameter>
                                    <parameter name="in_X_TRANSACTION_ID" source="field" updatable="true">temp.tmp_X_TRANSACTION_ID</parameter>
                                    <parameter name="in_EventName" source="field" updatable="true">temp.tmp_EventName</parameter>
                                    <parameter name="in_IICS_Process_ID" source="field" updatable="true">temp.tmp_IICS_Process_ID</parameter>
                                    <parameter name="in_ParentProcessStartTime" source="field" updatable="true">temp.tmp_ProcessStartTime</parameter>
                                    <parameter name="in_ApiName" source="field" updatable="true">temp.tmp_ApiName</parameter>
                                 </input>
                                 <outputDef>
                                    <field name="HttpStatusCode_api5" type="string">
                                       <options>
                                          <option name="required">false</option>
                                       </options>
                                    </field>
                                 </outputDef>
                              </subflow>
                              <flow id="l833nfcc">
                                 <container id="lki35lzg" type="exclusive">
                                    <title>HttpStatusCode_api5</title>
                                    <flow id="lki35lzj">
                                       <eventContainer id="lki35mbu">
                                          <create id="lki35m86">
                                             <title>Log in SQL</title>
                                             <entityName>AppConn-VIPP2B:API5a_YY1_PaymentCleared_API_v2</entityName>
                                             <createInput>
                                                <parameter name="SAP_ID" source="formula" updatable="true">
                                                   <expression language="XQuery">$temp.tmp_ClearedPaymentEntry[1]/ID</expression>
                                                </parameter>
                                                <parameter name="Code" source="formula" updatable="true">
                                                   <expression language="XQuery">$temp.tmp_ClearedPaymentEntry[1]/Code</expression>
                                                </parameter>
                                                <parameter name="Code_01" source="formula" updatable="true">
                                                   <expression language="XQuery">$temp.tmp_ClearedPaymentEntry[1]/Code_01</expression>
                                                </parameter>
                                                <parameter name="CompanyCode" source="formula" updatable="true">
                                                   <expression language="XQuery">$temp.tmp_ClearedPaymentEntry[1]/CompanyCode</expression>
                                                </parameter>
                                                <parameter name="AccountingDocument" source="formula" updatable="true">
                                                   <expression language="XQuery">$temp.tmp_ClearedPaymentEntry[1]/AccountingDocument</expression>
                                                </parameter>
                                                <parameter name="InvAccountingDocumentItem" source="formula" updatable="true">
                                                   <expression language="XQuery">$temp.tmp_ClearedPaymentEntry[1]/InvAccountingDocumentItem</expression>
                                                </parameter>
                                                <parameter name="FiscalYear" source="formula" updatable="true">
                                                   <expression language="XQuery">$temp.tmp_ClearedPaymentEntry[1]/FiscalYear</expression>
                                                </parameter>
                                                <parameter name="ClearingFiscalYear" source="formula" updatable="true">
                                                   <expression language="XQuery">$temp.tmp_ClearedPaymentEntry[1]/ClearingFiscalYear</expression>
                                                </parameter>
                                                <parameter name="ClearingDate" source="formula" updatable="true">
                                                   <expression language="XQuery">date:millisToDate(xs:integer(fn:replace(fn:replace($temp.tmp_ClearedPaymentEntry[1]/ClearingDate , '/Date\(', ''), '\)/', ''))) </expression>
                                                </parameter>
                                                <parameter name="Customer" source="formula" updatable="true">
                                                   <expression language="XQuery">$temp.tmp_ClearedPaymentEntry[1]/Customer</expression>
                                                </parameter>
                                                <parameter name="DocumentReferenceID" source="formula" updatable="true">
                                                   <expression language="XQuery">$temp.tmp_ClearedPaymentEntry[1]/DocumentReferenceID</expression>
                                                </parameter>
                                                <parameter name="Reference1InDocumentHeader" source="formula" updatable="true">
                                                   <expression language="XQuery">$temp.tmp_ClearedPaymentEntry[1]/Reference1InDocumentHeader</expression>
                                                </parameter>
                                                <parameter name="AccountingDocumentHeaderText"
                                                           source="formula"
                                                           updatable="true">
                                                   <expression language="XQuery">$temp.tmp_ClearedPaymentEntry[1]/AccountingDocumentHeaderText</expression>
                                                </parameter>
                                                <parameter name="AmountInBalanceTransacCrcy" source="formula" updatable="true">
                                                   <expression language="XQuery">$temp.tmp_ClearedPaymentEntry[1]/AmountInBalanceTranacCrcy</expression>
                                                </parameter>
                                                <parameter name="BalanceTransactionCurrency" source="formula" updatable="true">
                                                   <expression language="XQuery">$temp.tmp_ClearedPaymentEntry[1]/BalanceTransactionCurrency</expression>
                                                </parameter>
                                                <parameter name="NetPaymentAmount" source="formula" updatable="true">
                                                   <expression language="XQuery">$temp.tmp_ClearedPaymentEntry[1]/NetPaymentAmount</expression>
                                                </parameter>
                                                <parameter name="TransactionCurrency" source="formula" updatable="true">
                                                   <expression language="XQuery">$temp.tmp_ClearedPaymentEntry[1]/TransactionCurrency</expression>
                                                </parameter>
                                                <parameter name="VPointInvoiceNr" source="formula" updatable="true">
                                                   <expression language="XQuery">$temp.tmp_ClearedPaymentEntry[1]/VPointInvoiceNr</expression>
                                                </parameter>
                                                <parameter name="ClearingJournalEntry" source="formula" updatable="true">
                                                   <expression language="XQuery">$temp.tmp_ClearedPaymentEntry[1]/ClearingJournalEntry</expression>
                                                </parameter>
                                                <parameter name="ClearingJournalEntryFiscalYear"
                                                           source="formula"
                                                           updatable="true">
                                                   <expression language="XQuery">$temp.tmp_ClearedPaymentEntry[1]/ClearingJournalEntryFiscalYear</expression>
                                                </parameter>
                                                <parameter name="WBSElementExternalID" source="formula" updatable="true">
                                                   <expression language="XQuery">$temp.tmp_ClearedPaymentEntry[1]/WBSElementExternalID</expression>
                                                </parameter>
                                                <parameter name="ZUpdate" source="formula" updatable="true">
                                                   <expression language="XQuery">$temp.tmp_ClearedPaymentEntry[1]/ZUpdate</expression>
                                                </parameter>
                                                <parameter name="PayAmount" source="formula" updatable="true">
                                                   <expression language="XQuery">$temp.tmp_ClearedPaymentEntry[1]/PayAmount</expression>
                                                </parameter>
                                                <parameter name="AccountingDocumentItem" source="formula" updatable="true">
                                                   <expression language="XQuery">$temp.tmp_ClearedPaymentEntry[1]/AccountingDocumentItem</expression>
                                                </parameter>
                                                <parameter name="PayTransactionCurrency" source="formula" updatable="true">
                                                   <expression language="XQuery">$temp.tmp_ClearedPaymentEntry[1]/PayTransactionCurrency</expression>
                                                </parameter>
                                                <parameter name="PayAmountInTransactionCurrency"
                                                           source="formula"
                                                           updatable="true">
                                                   <expression language="XQuery">$temp.tmp_ClearedPaymentEntry[1]/PayAmountInTransactionCurrency</expression>
                                                </parameter>
                                                <parameter name="PostingKey" source="formula" updatable="true">
                                                   <expression language="XQuery">$temp.tmp_ClearedPaymentEntry[1]/PostingKey</expression>
                                                </parameter>
                                                <parameter name="CompanyCode_1" source="formula" updatable="true">
                                                   <expression language="XQuery">$temp.tmp_ClearedPaymentEntry[1]/CompanyCode_1</expression>
                                                </parameter>
                                                <parameter name="KeyValue1" source="formula" updatable="true">
                                                   <expression language="XQuery">$temp.tmp_ClearedPaymentEntry[1]/KeyValue1</expression>
                                                </parameter>
                                                <parameter name="KeyValue2" source="formula" updatable="true">
                                                   <expression language="XQuery">$temp.tmp_ClearedPaymentEntry[1]/KeyValue2</expression>
                                                </parameter>
                                                <parameter name="KeyValue3" source="formula" updatable="true">
                                                   <expression language="XQuery">$temp.tmp_ClearedPaymentEntry[1]/KeyValue3</expression>
                                                </parameter>
                                                <parameter name="KeyValue4" source="formula" updatable="true">
                                                   <expression language="XQuery">$temp.tmp_ClearedPaymentEntry[1]/KeyValue4</expression>
                                                </parameter>
                                             </createInput>
                                          </create>
                                          <flow id="lki35mbw">
                                             <link id="lki35mbx" targetId="lki35mbu" type="containerLink"/>
                                          </flow>
                                          <flow id="lki35mbz">
                                             <link id="lki35mc0" targetId="lki35mbu" type="containerLink"/>
                                          </flow>
                                          <link id="lki35mbv" targetId="lki35mbw" type="containerLink"/>
                                          <events>
                                             <catch faultField="faultInfo" id="lki35m8i" interrupting="true">
                                                <link id="lki35mby" targetId="lki35mbz" type="containerLink"/>
                                             </catch>
                                          </events>
                                       </eventContainer>
                                       <link id="lki35lzk" targetId="lki35lzg" type="containerLink"/>
                                    </flow>
                                    <flow id="lki35lzm">
                                       <link id="lki35lzn" targetId="lki35lzg" type="containerLink"/>
                                    </flow>
                                    <link id="lki35lzi" targetId="lki35lzj" type="containerLink">
                                       <condition source="formula">
                                          <function name="ends-with">
                                             <arg name="left">{$output.HttpStatusCode_api5}</arg>
                                             <arg name="right">200</arg>
                                          </function>
                                       </condition>
                                    </link>
                                    <link id="lki35lzl" targetId="lki35lzm" type="containerLink"/>
                                 </container>
                                 <link id="l833nfcr" targetId="l833nfcb" type="containerLink"/>
                              </flow>
                              <flow id="l833nfcd">
                                 <subflow id="l833nfce">
                                    <title>Log Post Receipt Error</title>
                                    <subflowGUID>7N5uKhvv6kXg3zoRAbuggF</subflowGUID>
                                    <subflowPath>Process_P2B_Event_ErrorLog</subflowPath>
                                    <runForEach>false</runForEach>
                                    <input>
                                       <parameter name="i_X_TRANSACTION_ID" source="field" updatable="true">temp.tmp_X_TRANSACTION_ID</parameter>
                                       <parameter name="i_IICS_Run_ID" source="field" updatable="true">temp.tmp_IICS_Process_ID</parameter>
                                       <parameter name="i_Code" source="field" updatable="true">output.api5-faultInfo[1]/code</parameter>
                                       <parameter name="i_Error" source="field" updatable="true">output.api5-faultInfo[1]/reason</parameter>
                                       <parameter name="i_Description" source="field" updatable="true">output.api5-faultInfo[1]/detail</parameter>
                                       <parameter name="i_APIName" source="field" updatable="true">temp.tmp_ApiName</parameter>
                                       <parameter name="i_EventName" source="field" updatable="true">temp.tmp_EventName</parameter>
                                       <parameter name="i_DataKey" source="formula" updatable="true">
                                          <expression language="XQuery">fn:concat('Customer-ClearingAccountingDocument-DocumentReferenceID : ',$temp.tmp_ClearedPaymentEntry/Customer,'-',$temp.tmp_ClearedPaymentEntry/ClearingJournalEntry,'-',$temp.tmp_ClearedPaymentEntry/DocumentReferenceID)</expression>
                                       </parameter>
                                       <parameter name="i_IICSProcessname" source="formula" updatable="true">
                                          <expression language="XQuery">util:getAssetName()</expression>
                                       </parameter>
                                       <parameter name="i_FailedAtStep" source="formula" updatable="true">
                                          <expression language="XQuery">util:iif(fn:starts-with($output.api5-faultInfo[1]/detail , 'Receipt cancellation failed - '), 'SAP : Cancellation of Receipt', 'api5')</expression>
                                       </parameter>
                                       <parameter name="i_RestURL" source="formula" updatable="true">
                                          <expression language="XQuery">util:iif(fn:starts-with($output.api5-faultInfo[1]/detail , 'Receipt cancellation failed - '), util:resolveURN('URN_SAP_Hostname')||'/sap/opu/odata/sap/YY1_PAYMENTCLEARED_API_V1_CDS/YY1_PaymentCleared_API_v1', util:resolveURN('URN_VPC_Hostname')||'/api/V8.0/PracticeManagement/CashFlow/Receipts')</expression>
                                       </parameter>
                                       <parameter name="i_RequestPayload" source="formula" updatable="true">
                                          <expression language="XQuery">util:iif(fn:starts-with($output.api5-faultInfo[1]/detail , 'Receipt cancellation failed - '), util:toXML($output.api5-faultInfo[1]/detail), 'N/A')</expression>
                                       </parameter>
                                       <parameter name="i_HelpFileLInk" source="constant" updatable="true">N/A (Custom API)</parameter>
                                       <parameter name="i_ProcessStartTime" source="field" updatable="true">temp.tmp_ProcessStartTime</parameter>
                                    </input>
                                    <outputDef/>
                                    <link id="l833nfcs" targetId="l833nfcf"/>
                                 </subflow>
                                 <jumpTo id="l833nfcf">
                                    <link id="l833nfct" targetId="l833nfch"/>
                                 </jumpTo>
                              </flow>
                              <link id="l833nfco" targetId="l833nfcc" type="containerLink"/>
                              <link id="l833nfcq" targetId="l833nfch"/>
                              <events>
                                 <catch faultField="api5-faultInfo" id="kzi42y0n" interrupting="true">
                                    <link id="l833nfcp" targetId="l833nfcd" type="containerLink"/>
                                 </catch>
                              </events>
                           </eventContainer>
                           <link id="l833nfcm" targetId="l833nfc8" type="containerLink"/>
                        </flow>
                        <flow id="l833nfci">
                           <end id="l833nfcj">
                              <title>End No more entries to process</title>
                           </end>
                        </flow>
                        <link id="l833nfck" targetId="l833nfc9" type="containerLink">
                           <condition source="formula">
                              <function name="not-empty">
                                 <arg name="field">{$output.o_ClearedPaymentEntries_Array}</arg>
                              </function>
                           </condition>
                        </link>
                        <link id="l833nfcl" targetId="l833nfci" type="containerLink">
                           <condition source="formula">
                              <function name="empty">
                                 <arg name="field">{$output.o_ClearedPaymentEntries_Array}</arg>
                              </function>
                           </condition>
                        </link>
                     </container>
                     <link id="l833nepi" targetId="l833nepd" type="containerLink"/>
                  </flow>
                  <flow id="l833nepk">
                     <throw id="l833ngjr">
                        <title>Throw VPCToken set error</title>
                        <throwInput>
                           <parameter name="code" source="constant" updatable="true">404</parameter>
                           <parameter name="detail" source="constant" updatable="true">VPC Token not set</parameter>
                           <parameter name="reason" source="constant" updatable="true">VPC Token not set</parameter>
                        </throwInput>
                     </throw>
                  </flow>
                  <link id="l833nepg" targetId="l833neph" type="containerLink">
                     <condition source="formula">
                        <function name="true">
                           <arg name="field">{$temp.tmp_TokenSetFlag}</arg>
                        </function>
                     </condition>
                  </link>
                  <link id="l833nepj" targetId="l833nepk" type="containerLink">
                     <condition source="formula">
                        <function name="false">
                           <arg name="field">{$temp.tmp_TokenSetFlag}</arg>
                        </function>
                     </condition>
                  </link>
                  <link id="l833nfc7" targetId="kr94x7br"/>
               </container>
               <jumpTo id="kr94x7br">
                  <link id="kr94x7bs" targetId="l833nfc8"/>
               </jumpTo>
            </flow>
         </process>
         <ns1:sample-data-sets xmlns:ns1="http://schemas.active-endpoints.com/appmodules/repository/2010/10/sampleData.xsd">
            <ns1:SampleData>
               <ns1:Id>a289f15c-ca70-4c48-85a3-6808ac5c2fcd</ns1:Id>
               <ns1:Name>t</ns1:Name>
               <ns1:CreatedBy>veerabh-vistra-tst</ns1:CreatedBy>
               <ns1:CreationDate>2022-10-12T10:48:22Z</ns1:CreationDate>
               <ns1:ModifiedBy>anupama.rao@vistra.com.SAML</ns1:ModifiedBy>
               <ns1:ModificationDate>2023-05-17T06:35:54Z</ns1:ModificationDate>
               <ns1:Data format="json">{}</ns1:Data>
            </ns1:SampleData>
         </ns1:sample-data-sets>
      </types1:Entry>
      <types1:GUID>0oMp4Uu4BdPbWeZPaWBZQE</types1:GUID>
      <types1:DisplayName>api5_Wrapper</types1:DisplayName>
   </types1:Item>
   <types1:CurrentServerDateTime>2023-08-25T08:17:46.722Z</types1:CurrentServerDateTime>
</aetgt:getResponse>
