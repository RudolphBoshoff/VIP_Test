<aetgt:getResponse xmlns:aetgt="http://schemas.active-endpoints.com/appmodules/repository/2010/10/avrepository.xsd"
                   xmlns:types1="http://schemas.active-endpoints.com/appmodules/repository/2010/10/avrepository.xsd">
   <types1:Item>
      <types1:EntryId>x5tmYOxfSmbduaa-gt-15255444-2022-12-29T07:15:50.386Z::pd.xml</types1:EntryId>
      <types1:Name>Process_GET_Workflow_-_Copy_1</types1:Name>
      <types1:ParentFlowIds>SJhtghGZ5i4rswV-gt-8030674-2022-12-29T07:15:50.718Z::pd.xml</types1:ParentFlowIds>
      <types1:MimeType>application/xml+process</types1:MimeType>
      <types1:Description/>
      <types1:AppliesTo/>
      <types1:Tags>.agent:VIP_IICS_SA_SG_ONPREM_GROUP,.anonymous</types1:Tags>
      <types1:VersionLabel>1.0</types1:VersionLabel>
      <types1:State>CURRENT</types1:State>
      <types1:ProcessGroup/>
      <types1:CreatedBy>veerabh-vistra-tst</types1:CreatedBy>
      <types1:CreationDate>2022-12-29T07:15:50Z</types1:CreationDate>
      <types1:ModifiedBy/>
      <types1:PublicationStatus>unpublished</types1:PublicationStatus>
      <types1:AutosaveExists>false</types1:AutosaveExists>
      <types1:Entry>
         <process xmlns="http://schemas.active-endpoints.com/appmodules/screenflow/2010/10/avosScreenflow.xsd"
                  xmlns:tfm="http://schemas.active-endpoints.com/appmodules/screenflow/2021/04/taskflowModel.xsd"
                  xmlns:list="urn:activevos:spi:list:functions"
                  displayName="Process_GET_Workflow - Copy 1"
                  name="Process_GET_Workflow_-_Copy_1"
                  overrideAPIName="false">
            <parameterSet xmlns="http://schemas.active-endpoints.com/appmodules/screenflow/2021/04/taskflowModel.xsd"/>
            <appliesTo/>
            <description/>
            <tags>.agent:VIP_IICS_SA_SG_ONPREM_GROUP,.anonymous</tags>
            <generator>Informatica Process Designer 11</generator>
            <input>
               <parameter description="" name="in_WflowNr" required="true" type="int">
                  <options>
                     <option name="required">false</option>
                  </options>
               </parameter>
               <parameter description="" name="in_RefCode" required="true" type="string">
                  <options>
                     <option name="required">false</option>
                  </options>
               </parameter>
            </input>
            <output>
               <field description="" name="out_BomHeader" type="reference">
                  <options>
                     <option name="referenceTo">$po:PoCfBomHead-Prepared</option>
                     <option name="required">false</option>
                     <option name="isCopy">true</option>
                     <option name="guid">3TOuBiqwuKsdp5eqlzJ2wG</option>
                  </options>
               </field>
            </output>
            <tempFields>
               <field description="" name="tmp_VPC_WflowHeader" type="reference">
                  <options>
                     <option name="referenceTo">AppConnectionVPCdbo:WflowHeader</option>
                     <option name="required">false</option>
                     <option name="guid">cta893CVPCvl9C54Pb8Uk8</option>
                  </options>
               </field>
               <field description="" name="tmp_VPC_WflowFields" type="reference">
                  <options>
                     <option name="referenceTo">AppConnectionVPCdbo:WflowFields</option>
                     <option name="required">false</option>
                     <option name="guid">cta893CVPCvl9C54Pb8Uk8</option>
                  </options>
               </field>
               <field description="" name="tmp_VPC_WflowFields_List" type="objectlist">
                  <options>
                     <option name="referenceTo">AppConnectionVPCdbo:WflowFields</option>
                     <option hide="true" name="multiSelect">true</option>
                     <option name="required">false</option>
                     <option name="guid">cta893CVPCvl9C54Pb8Uk8</option>
                  </options>
               </field>
               <field description="" name="tmp_VPC_DocIndex_List" type="objectlist">
                  <options>
                     <option name="referenceTo">AppConnectionVPCdbo:DocIndex</option>
                     <option hide="true" name="multiSelect">true</option>
                     <option name="required">false</option>
                     <option name="guid">cta893CVPCvl9C54Pb8Uk8</option>
                  </options>
               </field>
               <field description="" name="tmp_VPC_DocFiles_List" type="objectlist">
                  <options>
                     <option name="referenceTo">AppConnectionVPCdbo:DocFiles</option>
                     <option hide="true" name="multiSelect">true</option>
                     <option name="required">false</option>
                     <option name="guid">cta893CVPCvl9C54Pb8Uk8</option>
                  </options>
               </field>
               <field description="" name="tmp_VPC_WflowLinks_List" type="objectlist">
                  <options>
                     <option name="referenceTo">AppConnectionVPCdbo:WflowLinks</option>
                     <option hide="true" name="multiSelect">true</option>
                     <option name="required">false</option>
                     <option name="guid">cta893CVPCvl9C54Pb8Uk8</option>
                  </options>
               </field>
               <field description="" name="tmp_VPC_BomInstance_List" type="objectlist">
                  <options>
                     <option name="referenceTo">AppConnectionVPCvip:BomInstance</option>
                     <option hide="true" name="multiSelect">true</option>
                     <option name="required">false</option>
                     <option name="isCopy">true</option>
                     <option name="guid">0cTIoVSGjEnc8junjgI8KG</option>
                  </options>
               </field>
               <field description="" name="tmp_SalesCode" type="string">
                  <options>
                     <option name="required">false</option>
                  </options>
               </field>
               <field description="" name="tmp_VPC_DocFile_Current" type="reference">
                  <options>
                     <option name="referenceTo">AppConnectionVPCdbo:DocFiles</option>
                     <option name="required">false</option>
                     <option name="guid">cta893CVPCvl9C54Pb8Uk8</option>
                  </options>
               </field>
               <field description="" name="tmp_VPC_DocIndex_Current" type="reference">
                  <options>
                     <option name="referenceTo">AppConnectionVPCdbo:DocIndex</option>
                     <option name="required">false</option>
                     <option name="guid">cta893CVPCvl9C54Pb8Uk8</option>
                  </options>
               </field>
               <field description="" name="tmp_DocPrep" type="reference">
                  <options>
                     <option name="referenceTo">$po:$any</option>
                     <option name="required">false</option>
                     <option name="isCopy">true</option>
                  </options>
               </field>
               <field description="" name="tmp_DocPrep_List" type="objectlist">
                  <options>
                     <option name="referenceTo">$po:$any</option>
                     <option hide="true" name="multiSelect">true</option>
                     <option name="required">false</option>
                     <option name="isCopy">true</option>
                  </options>
               </field>
               <field description="" name="tmp_DocFilter" type="string">
                  <options>
                     <option name="required">false</option>
                  </options>
               </field>
               <field description="" name="tmp_WFServiceType" type="string">
                  <options>
                     <option name="required">false</option>
                  </options>
               </field>
            </tempFields>
            <notes>There is some strange behavior with the VPC connection: when connecting to the VIP schema, the data supports a loop inside XQuery, however when connecting to the DBO schema, this is not supported, and the manual process of list:head and list:tail is used to construct the data elements</notes>
            <deployment skipIfRunning="false" suspendOnFault="false" tracingLevel="verbose">
               <targetLocation>VIP_IICS_SA_SG_ONPREM_GROUP</targetLocation>
               <rest>
                  <allowAnonymousAccess/>
               </rest>
            </deployment>
            <flow id="a">
               <start id="b">
                  <link id="lb5d2jq1" targetId="lb5c2yhi"/>
               </start>
               <assignment id="lb5c2yhi">
                  <title>Query VPC Workflow</title>
                  <operation source="query" to="temp.tmp_VPC_WflowHeader">
                     <query advanceQuery="false" from="AppConnectionVPCdbo:WflowHeader">
                        <where>WflowNr = {$input.in_WflowNr}</where>
                     </query>
                  </operation>
                  <operation source="list" to="temp.tmp_VPC_WflowFields_List">
                     <query advanceQuery="false" from="AppConnectionVPCdbo:WflowFields">
                        <where>WflowNr = {$input.in_WflowNr} and FldKey = 'SCODE'</where>
                     </query>
                  </operation>
                  <operation source="formula" to="temp.tmp_VPC_WflowFields">
                     <expression language="XQuery">list:head($temp.tmp_VPC_WflowFields_List )</expression>
                  </operation>
                  <operation source="list" to="temp.tmp_VPC_WflowLinks_List">
                     <query advanceQuery="false" from="AppConnectionVPCdbo:WflowLinks">
                        <where>WflowNr = {$input.in_WflowNr} and LinkType = 'DH'</where>
                     </query>
                  </operation>
                  <link id="lbaryhib" targetId="lbaryhia"/>
               </assignment>
               <assignment id="lbaryhia">
                  <title>Query VPC BomInstance</title>
                  <operation source="list" to="temp.tmp_VPC_BomInstance_List">
                     <query advanceQuery="false" from="AppConnectionVPCvip:BomInstance">
                        <where>SalesCode = '{$temp.tmp_VPC_WflowFields.FldValue}' and RefCode = '{$input.in_RefCode}' and WflowNr = {$input.in_WflowNr}</where>
                     </query>
                  </operation>
                  <link id="lbaryhic" targetId="lb5g4r3d"/>
               </assignment>
               <assignment id="lb5g4r3d">
                  <title>Prepare Document Filter</title>
                  <operation source="formula" to="temp.tmp_DocFilter">
                     <expression language="XQuery">fn:string-join(
for $bom in $temp.tmp_VPC_BomInstance_List
return $bom/HolderNr/text()
, ",")</expression>
                  </operation>
                  <link id="lbaryhku" targetId="lbaryhkt"/>
               </assignment>
               <assignment id="lbaryhkt">
                  <title>Query VPC Documents</title>
                  <operation source="list" to="temp.tmp_VPC_DocFiles_List">
                     <query advanceQuery="false" from="AppConnectionVPCdbo:DocFiles">
                        <where>DixDocNr in ({$temp.tmp_DocFilter})</where>
                     </query>
                  </operation>
                  <operation source="list" to="temp.tmp_VPC_DocIndex_List">
                     <query advanceQuery="false" from="AppConnectionVPCdbo:DocIndex">
                        <where>DocNr in ({$temp.tmp_DocFilter})</where>
                     </query>
                  </operation>
                  <link id="lbaryhli" targetId="lbaryhl6"/>
               </assignment>
               <container id="lbaryhl6" type="exclusive">
                  <title>Loop Doc List</title>
                  <flow id="lbaryhl7">
                     <assignment id="lbaryhl8">
                        <title>Next Record</title>
                        <operation source="formula" to="temp.tmp_VPC_DocFile_Current">
                           <expression language="XQuery">list:head($temp.tmp_VPC_DocFiles_List )</expression>
                        </operation>
                        <operation source="formula" to="temp.tmp_VPC_DocFiles_List">
                           <expression language="XQuery">list:tail($temp.tmp_VPC_DocFiles_List )</expression>
                        </operation>
                        <operation source="formula" to="temp.tmp_VPC_DocIndex_Current">
                           <expression language="XQuery">list:head($temp.tmp_VPC_DocIndex_List )</expression>
                        </operation>
                        <operation source="formula" to="temp.tmp_VPC_DocIndex_List">
                           <expression language="XQuery">list:tail($temp.tmp_VPC_DocIndex_List )</expression>
                        </operation>
                        <link id="lbaryhle" targetId="lbaryhl9"/>
                     </assignment>
                     <assignment id="lbaryhl9">
                        <title>Prepare Document</title>
                        <operation source="formula" to="temp.tmp_DocPrep">
                           <expression language="XQuery">&lt;Document&gt;
  &lt;DocIndex_DocNr&gt;{$temp.tmp_VPC_DocIndex_Current.DocNr }&lt;/DocIndex_DocNr&gt;
  &lt;DocIndex_FolderNr&gt;{$temp.tmp_VPC_DocIndex_Current.FolderNr }&lt;/DocIndex_FolderNr&gt;
  &lt;DocFile_DocFileId&gt;{$temp.tmp_VPC_DocFile_Current.DocFileId }&lt;/DocFile_DocFileId&gt;
  &lt;DocFile_FileNr&gt;{$temp.tmp_VPC_DocFile_Current.FileNr }&lt;/DocFile_FileNr&gt;
  &lt;DocFile_FileNames&gt;{$temp.tmp_VPC_DocFile_Current.FileNames }&lt;/DocFile_FileNames&gt;
  &lt;DocFile_StoredStatus&gt;{$temp.tmp_VPC_DocFile_Current.StoredStatus }&lt;/DocFile_StoredStatus&gt;
  &lt;DocIndex_Descr&gt;{$temp.tmp_VPC_DocIndex_Current.Descr }&lt;/DocIndex_Descr&gt;
  &lt;DocIndex_Note&gt;{$temp.tmp_VPC_DocIndex_Current.Note }&lt;/DocIndex_Note&gt;     
&lt;/Document&gt;</expression>
                        </operation>
                        <operation source="formula" to="temp.tmp_DocPrep_List">
                           <function name="list:append">
                              <arg name="dest_field">{$temp.tmp_DocPrep_List}</arg>
                              <arg name="new_field">{$temp.tmp_DocPrep}</arg>
                           </function>
                        </operation>
                        <link id="lbaryhlf" targetId="lbaryhla"/>
                     </assignment>
                     <jumpTo id="lbaryhla">
                        <link id="lbaryhlg" targetId="lbaryhl6"/>
                     </jumpTo>
                  </flow>
                  <flow id="lbaryhlb">
                     <assignment id="lbaryhlr">
                        <title>Set Output</title>
                        <operation source="formula" to="output.out_BomHeader">
                           <expression language="XQuery">let $bom := $temp.tmp_VPC_BomInstance_List[1] 
return
&lt;Header&gt;
		{$bom/SalesCode  }
		{$bom/BomCode }
		{$bom/RefCode }
		{$bom/Jurisdiction }
		{$bom/Description }
		{$bom/ShortDesc }
		{$bom/WflowNr }
        &lt;WF_ServiceType&gt;{switch ($temp.tmp_VPC_WflowHeader.WfTemplateNr)
        					case "240" return "NI"
                            case "243" return "NI"
                            default return "TS"}&lt;/WF_ServiceType&gt;
        &lt;WfTemplateNr&gt;{$temp.tmp_VPC_WflowHeader.WfTemplateNr}&lt;/WfTemplateNr&gt;
        &lt;WfDescr&gt;{$temp.tmp_VPC_WflowHeader.WflowDescr }&lt;/WfDescr&gt;
        {for $c in $temp.tmp_VPC_BomInstance_List  
         let $dM := $temp.tmp_DocPrep_List[DocIndex_DocNr=$c/HolderNr] 
             return
		&lt;Components&gt; 
			{$c/ItemGroupId} 
			{$c/ComponentOrder } 
			{$c/ComponentCode } 
			{$c/ComponentDescription } 
			{$c/Qty } 
			{$c/Currency } 
			{$c/UnitPrice } 
			{$c/TotalComponentPrice} 
			{$c/ExchangeRate} 
			{$c/TotalComponentPrice_USD } 
			{$c/PreferredVendor } 
			{$c/RequirePO} 
			{$c/ProcessingStatus } 
			{$c/HolderNr } 
			{$c/FileNr } 
            {$c/SendingCostCenter }
            {$c/SendingGLAccount }
            {$c/CogsGLAccount }
                        
            &lt;!-- Pre-Constructed Document--&gt;
            {$dM/DocIndex_DocNr}
            {$dM/DocIndex_FolderNr}           
            {$dM/DocIndex_Descr}
            {$dM/DocIndex_Note}    
            {$dM/DocFile_DocFileId}
            {$dM/DocFile_FileNr}
            {$dM/DocFile_StoredStatus}
            {$dM/DocFile_FileNames}
           
		&lt;/Components&gt; } 
&lt;/Header&gt;</expression>
                        </operation>
                        <link id="lbaryhm8" targetId="lbaryhm7"/>
                     </assignment>
                     <end id="lbaryhm7">
                        <title>End 1</title>
                     </end>
                  </flow>
                  <link id="lbaryhlc" targetId="lbaryhl7" type="containerLink">
                     <condition source="formula">
                        <function name="not-empty">
                           <arg name="field">{$temp.tmp_VPC_DocFiles_List}</arg>
                        </function>
                     </condition>
                  </link>
                  <link id="lbaryhld" targetId="lbaryhlb" type="containerLink">
                     <condition source="formula">
                        <function name="empty">
                           <arg name="field">{$temp.tmp_VPC_DocFiles_List}</arg>
                        </function>
                     </condition>
                  </link>
               </container>
            </flow>
         </process>
         <ns1:sample-data-sets xmlns:ns1="http://schemas.active-endpoints.com/appmodules/repository/2010/10/sampleData.xsd">
            <ns1:SampleData>
               <ns1:Id>50ba6ae4-e19c-42f5-be93-2b9905519798</ns1:Id>
               <ns1:Name>t1</ns1:Name>
               <ns1:CreatedBy>veerabh-vistra-tst</ns1:CreatedBy>
               <ns1:CreationDate>2022-12-29T07:15:50Z</ns1:CreationDate>
               <ns1:ModifiedBy>veerabh-vistra-tst</ns1:ModifiedBy>
               <ns1:ModificationDate>2022-12-29T07:15:50Z</ns1:ModificationDate>
               <ns1:Data format="json">{
	 "in_WflowNr": "2583",
	 "in_RefCode": "12500188"
}</ns1:Data>
            </ns1:SampleData>
         </ns1:sample-data-sets>
      </types1:Entry>
      <types1:GUID>89yK5ctBrWJkMA74AGMj21</types1:GUID>
      <types1:DisplayName>Process_GET_Workflow - Copy 1</types1:DisplayName>
   </types1:Item>
   <types1:CurrentServerDateTime>2023-01-07T15:53:12.376Z</types1:CurrentServerDateTime>
</aetgt:getResponse>
