<aetgt:getResponse xmlns:aetgt="http://schemas.active-endpoints.com/appmodules/repository/2010/10/avrepository.xsd"
                   xmlns:types1="http://schemas.active-endpoints.com/appmodules/repository/2010/10/avrepository.xsd">
   <types1:Item>
      <types1:EntryId>EN15NYLonEBNjDg-gt-10749639-2021-12-06T15:34:21.496Z::pd.xml</types1:EntryId>
      <types1:Name>ProcessPostActualTimePosting</types1:Name>
      <types1:MimeType>application/xml+process</types1:MimeType>
      <types1:Description>VIP_P2B_Integrations</types1:Description>
      <types1:AppliesTo/>
      <types1:Tags>.agent:VIP_IICS_SA_SG_ONPREM_GROUP</types1:Tags>
      <types1:VersionLabel>1.0</types1:VersionLabel>
      <types1:State>CURRENT</types1:State>
      <types1:ProcessGroup/>
      <types1:CreatedBy>tiaan.stander@vistra.com.SAML</types1:CreatedBy>
      <types1:CreationDate>2021-12-06T15:34:21Z</types1:CreationDate>
      <types1:ModifiedBy>Rudolph.Boshoff.TST</types1:ModifiedBy>
      <types1:ModificationDate>2023-05-26T08:52:58Z</types1:ModificationDate>
      <types1:PublicationStatus>out-of-date</types1:PublicationStatus>
      <types1:PublishedBy>Rudolph.Boshoff.TST</types1:PublishedBy>
      <types1:PublicationDate>2023-03-31T14:33:53Z</types1:PublicationDate>
      <types1:PublishedContributionId>project:/spi.ProcessPostActualTimePosting/ProcessPostActualTimePosting.pd.xml</types1:PublishedContributionId>
      <types1:AutosaveExists>false</types1:AutosaveExists>
      <types1:Entry>
         <process xmlns="http://schemas.active-endpoints.com/appmodules/screenflow/2010/10/avosScreenflow.xsd"
                  xmlns:tfm="http://schemas.active-endpoints.com/appmodules/screenflow/2021/04/taskflowModel.xsd"
                  xmlns:list="urn:activevos:spi:list:functions"
                  displayName="ProcessPostActualTimePosting"
                  name="ProcessPostActualTimePosting"
                  overrideAPIName="false">
            <parameterSet xmlns="http://schemas.active-endpoints.com/appmodules/screenflow/2021/04/taskflowModel.xsd"/>
            <appliesTo/>
            <description>VIP_P2B_Integrations</description>
            <tags>.agent:VIP_IICS_SA_SG_ONPREM_GROUP</tags>
            <generator>Informatica Process Designer 11</generator>
            <input>
               <parameter description="" name="delimitedContent" type="reference">
                  <options>
                     <option name="required">false</option>
                     <option name="referenceTo">AppGetActualTimePosting:ActualTimePostingContent</option>
                     <option name="isCopy">true</option>
                     <option name="guid">8FuckZqsMfngka6gQLM7Ix</option>
                  </options>
               </parameter>
            </input>
            <output>
               <field description="" name="out_EnterpriseProjectObjects" type="reference">
                  <options>
                     <option name="referenceTo">$po:POEnterpriseProject</option>
                     <option name="required">false</option>
                     <option name="isCopy">true</option>
                     <option name="guid">aD6Bg2tY9TOfIY1Z3jQDoq</option>
                  </options>
               </field>
               <field description="" name="O_SUBP_EMAIL" type="string">
                  <options>
                     <option name="required">false</option>
                  </options>
               </field>
               <field description="" name="O_SUBP_UUID" type="string">
                  <options>
                     <option name="required">false</option>
                  </options>
               </field>
               <field description="" name="O_SUBP_CompanyCode" type="string">
                  <options>
                     <option name="required">false</option>
                  </options>
               </field>
               <field description="" name="O_SUBP_PersonWorkAgreement" type="string">
                  <options>
                     <option name="required">false</option>
                  </options>
               </field>
               <field description="" name="O_SUBP_Flag" type="string">
                  <options>
                     <option name="required">false</option>
                  </options>
               </field>
            </output>
            <tempFields>
               <field description="" name="tmp_Matters" type="reference">
                  <options>
                     <option name="referenceTo">AppConnectionVPCdbo:Matters</option>
                     <option name="required">false</option>
                     <option name="guid">cta893CVPCvl9C54Pb8Uk8</option>
                  </options>
               </field>
               <field description="" name="tmp_VpUsers" type="reference">
                  <options>
                     <option name="referenceTo">AppConnectionVPCdbo:VpUser</option>
                     <option name="required">false</option>
                     <option name="guid">cta893CVPCvl9C54Pb8Uk8</option>
                  </options>
               </field>
               <field description="" name="tmp_MailID" type="string">
                  <options>
                     <option name="required">false</option>
                  </options>
               </field>
               <field description="" name="tmp_MtAdmin2Code" type="string">
                  <options>
                     <option name="required">false</option>
                  </options>
               </field>
               <field description="" name="tmp_PO_ManagerUUID" type="string">
                  <options>
                     <option name="required">false</option>
                  </options>
               </field>
               <field description="" name="tmp_PO_RoleType" type="string">
                  <options>
                     <option name="required">false</option>
                  </options>
               </field>
               <field description="" name="tmp_Decision" type="string">
                  <options>
                     <option name="required">false</option>
                  </options>
               </field>
               <field description="" name="tmp_VPUSER_EMAIL_FLAG" type="string">
                  <options>
                     <option name="required">false</option>
                  </options>
               </field>
               <field description="" name="tmp_RmClients" type="reference">
                  <options>
                     <option name="referenceTo">AppConnectionVPCdbo:RmClients</option>
                     <option name="required">false</option>
                     <option name="guid">cta893CVPCvl9C54Pb8Uk8</option>
                  </options>
               </field>
               <field description="" name="tmp_Project" type="string">
                  <options>
                     <option name="required">false</option>
                  </options>
               </field>
               <field description="" name="tmp_Flag" type="string">
                  <options>
                     <option name="required">false</option>
                  </options>
               </field>
               <field description="" name="tmp_BusinessPartnerUUID" type="string">
                  <options>
                     <option name="required">false</option>
                  </options>
               </field>
               <field description="" name="tmp_CompanyCode" type="string">
                  <options>
                     <option name="required">false</option>
                  </options>
               </field>
               <field description="" name="tmp_PersonWorkAgreement" type="string">
                  <options>
                     <option name="required">false</option>
                  </options>
               </field>
               <field description="" name="tmp_PO" type="reference">
                  <options>
                     <option name="referenceTo">$po:POActualTimeEntry</option>
                     <option name="required">false</option>
                     <option name="isCopy">true</option>
                     <option name="guid">79wTsmfpbczh8TtRIpGeOY</option>
                  </options>
               </field>
               <field description="" name="tmp_TimePost_list" type="objectlist">
                  <options>
                     <option name="referenceTo">AppConnectionVPCdbo:TimePost</option>
                     <option hide="true" name="multiSelect">true</option>
                     <option name="required">false</option>
                     <option name="guid">cta893CVPCvl9C54Pb8Uk8</option>
                  </options>
               </field>
               <field description="" name="tmp_ServiceCostLevel" type="string">
                  <options>
                     <option name="required">false</option>
                  </options>
               </field>
               <field description="" name="tmp_TimePost" type="reference">
                  <options>
                     <option name="referenceTo">AppConnectionVPCdbo:TimePost</option>
                     <option name="required">false</option>
                     <option name="guid">cta893CVPCvl9C54Pb8Uk8</option>
                  </options>
               </field>
               <field description="" name="tmp_JSON" type="string">
                  <options>
                     <option name="required">false</option>
                  </options>
               </field>
               <field description="" name="tmp_HostName" type="string">
                  <options>
                     <option name="required">false</option>
                     <option name="initialvalue">https://my305570.s4hana.ondemand.com</option>
                  </options>
               </field>
               <field description="" name="tmp_UserName" type="string">
                  <options>
                     <option name="required">false</option>
                     <option name="initialvalue">VIEW_POINT_CLOUD_Q</option>
                  </options>
               </field>
               <field description="" name="tmp_Password" type="string">
                  <options>
                     <option name="required">false</option>
                     <option name="initialvalue">xTQXVaJPZah}lrCjN5KLridzayxjoRPmxFQougkl</option>
                  </options>
               </field>
               <field description="" name="tmp_CompCode" type="string">
                  <options>
                     <option name="required">false</option>
                  </options>
               </field>
               <field description="" name="tmp_EmailAdd" type="string">
                  <options>
                     <option name="required">false</option>
                  </options>
               </field>
               <field description="" name="tmp_PersonExternalID" type="string">
                  <options>
                     <option name="required">false</option>
                  </options>
               </field>
               <field description="" name="tmp_TimeSheetDate" type="string">
                  <options>
                     <option name="required">false</option>
                  </options>
               </field>
               <field description="" name="tmp_Body" type="string">
                  <options>
                     <option name="required">false</option>
                  </options>
               </field>
               <field description="" name="tmp_CurrDate" type="datetime">
                  <options>
                     <option name="thirtyMinutesIncrement">true</option>
                     <option name="required">false</option>
                  </options>
               </field>
               <field description="" name="tmp_EventLog_List" type="objectlist">
                  <options>
                     <option name="referenceTo">AppConnectionVPCdbo:EventLog</option>
                     <option hide="true" name="multiSelect">true</option>
                     <option name="required">false</option>
                     <option name="guid">cta893CVPCvl9C54Pb8Uk8</option>
                  </options>
               </field>
               <field description="" name="tmp_EventLog" type="reference">
                  <options>
                     <option name="referenceTo">AppConnectionVPCdbo:EventLog</option>
                     <option name="required">false</option>
                     <option name="guid">cta893CVPCvl9C54Pb8Uk8</option>
                  </options>
               </field>
               <field description="" name="tmp_RefPO" type="reference">
                  <options>
                     <option name="referenceTo">AppSvcPOSTTimeSheetEntry:root</option>
                     <option name="required">false</option>
                     <option name="isCopy">true</option>
                     <option name="guid">4rlCvdGslKohT1ji19M3kH</option>
                  </options>
               </field>
               <field description="" name="tmp_NrUnits" type="int">
                  <options>
                     <option name="required">false</option>
                  </options>
               </field>
               <field description="" name="tmp_NrUnitsMain" type="int">
                  <options>
                     <option name="required">false</option>
                  </options>
               </field>
               <field description="" name="tmp_API12Audit" type="reference">
                  <options>
                     <option name="referenceTo">ConnectionDQMetadata-1:VIP_P2B_API12_TimePost_Audit</option>
                     <option name="required">false</option>
                     <option name="guid">2k0VOKhPhwUiJh4QHcAXok</option>
                  </options>
               </field>
               <field description="" name="tmp_AuditTime" type="string">
                  <options>
                     <option name="required">false</option>
                  </options>
               </field>
               <field description="" name="tmp_StatTime" type="datetime">
                  <options>
                     <option name="thirtyMinutesIncrement">true</option>
                     <option name="required">false</option>
                  </options>
               </field>
               <field description="" name="tmp_EndTime" type="datetime">
                  <options>
                     <option name="thirtyMinutesIncrement">true</option>
                     <option name="required">false</option>
                  </options>
               </field>
               <field description="" name="tmp_EmailInput" type="reference">
                  <options>
                     <option name="referenceTo">AppConn-Email-1:EmailTaskInput</option>
                     <option name="required">false</option>
                     <option name="isCopy">true</option>
                     <option name="guid">aGqWxC1jkG7dWgHznehPkO</option>
                  </options>
               </field>
               <field description="" name="tmp_CountList" type="string">
                  <options>
                     <option name="required">false</option>
                  </options>
               </field>
               <field description="" name="tmp_TZ" type="datetime">
                  <options>
                     <option name="thirtyMinutesIncrement">true</option>
                     <option name="required">false</option>
                  </options>
               </field>
               <field description="" name="tmp_StartTS_STR" type="string">
                  <options>
                     <option name="required">false</option>
                  </options>
               </field>
               <field description="" name="tmp_EndTS_STR" type="string">
                  <options>
                     <option name="required">false</option>
                  </options>
               </field>
            </tempFields>
            <notes/>
            <deployment suspendOnFault="false" tracingLevel="verbose">
               <targetLocation>VIP_IICS_SA_SG_ONPREM_GROUP</targetLocation>
               <event eventSource="AppGetActualTimePosting:ActualTimePosting"/>
            </deployment>
            <flow id="a">
               <start id="b">
                  <link id="kwvnq3yl" targetId="kwvnq3yk"/>
               </start>
               <assignment id="kwvnq3yk">
                  <title>reset work_Variable; remove headers from data</title>
                  <operation source="formula" to="temp.tmp_TimePost_list">
                     <expression language="XQuery">$input.delimitedContent[1]/record </expression>
                  </operation>
                  <link id="kwvnq3ym" targetId="kuwjm0b7"/>
               </assignment>
               <assignment id="kuwjm0b7">
                  <title>Get URN Parameters</title>
                  <operation source="formula" to="temp.tmp_HostName">
                     <expression language="XQuery">util:resolveURN('URN_SAP_Hostname')</expression>
                  </operation>
                  <operation source="formula" to="temp.tmp_UserName">
                     <expression language="XQuery">util:resolveURN('URN_SAP_Username')</expression>
                  </operation>
                  <operation source="formula" to="temp.tmp_Password">
                     <expression language="XQuery">util:resolveURN('URN_SAP_Pwd')</expression>
                  </operation>
                  <link id="kv2839ob" targetId="kv2839oa"/>
               </assignment>
               <assignment id="kv227d80">
                  <title>Get MAX BatchID</title>
                  <operation source="query" to="temp.tmp_API12Audit">
                     <query advanceQuery="true"
                            from="ConnectionDQMetadata-1:VIP_P2B_API12_TimePost_Audit">
                        <where>BatchId = (select MAX(BatchId) from DqMetaData.VIP_P2B_API12_TimePost_Audit )</where>
                     </query>
                  </operation>
                  <link id="kv27crke" targetId="kv27crkd"/>
               </assignment>
               <assignment id="kv27crkd">
                  <title>Set Start End TS</title>
                  <operation source="formula" to="temp.tmp_StatTime">
                     <expression language="XQuery">date:addToDate($temp.tmp_API12Audit.Start_TS,'HH',8) </expression>
                  </operation>
                  <operation source="formula" to="temp.tmp_EndTime">
                     <expression language="XQuery">date:addToDate($temp.tmp_API12Audit.End_TS,'HH',8) </expression>
                  </operation>
                  <link id="kvvv2b3r" targetId="kvvv2b3q"/>
               </assignment>
               <assignment id="kvvv2b3q">
                  <title>Assignment to tmp_StartTS_STR, tmp_EndTS_STR</title>
                  <operation source="formula" to="temp.tmp_StartTS_STR">
                     <expression language="XQuery">date:addToDate($temp.tmp_API12Audit.Start_TS,'HH',8) </expression>
                  </operation>
                  <operation source="formula" to="temp.tmp_EndTS_STR">
                     <expression language="XQuery">date:addToDate($temp.tmp_API12Audit.Start_TS,'HH',8) </expression>
                  </operation>
                  <link id="kwvnq3xl" targetId="kv6b7euw"/>
               </assignment>
               <assignment id="kv6b7euw">
                  <title>Assignment to tmp_CountList</title>
                  <operation source="formula" to="temp.tmp_CountList">
                     <expression language="XQuery">list:count($temp.tmp_TimePost_list)</expression>
                  </operation>
                  <link id="kv6b7euy" targetId="kv0wec0p"/>
               </assignment>
               <service id="kv2839oa">
                  <title>SAP Token</title>
                  <serviceName>AppERPGettoken:getAccessToken</serviceName>
                  <serviceGUID>6D5gF9AP8aLlArRqeUz0AL</serviceGUID>
                  <serviceInput>
                     <parameter name="hostName" source="formula">
                        <expression language="XQuery">util:resolveURN('URN_SAP_Hostname')</expression>
                     </parameter>
                     <parameter name="username" source="formula">
                        <expression language="XQuery">util:resolveURN('URN_SAP_Username')</expression>
                     </parameter>
                     <parameter name="password" source="formula">
                        <expression language="XQuery">util:resolveURN('URN_SAP_Pwd')
</expression>
                     </parameter>
                  </serviceInput>
                  <link id="kv2839oc" targetId="kv227d80"/>
               </service>
               <container id="kv0wec0p" type="exclusive">
                  <title>tmp_TimePost_list</title>
                  <flow id="kv0wec1k">
                     <assignment id="kv0wec70">
                        <title>TimePost Head</title>
                        <operation source="formula" to="temp.tmp_TimePost">
                           <expression language="XQuery">list:head($temp.tmp_TimePost_list )</expression>
                        </operation>
                        <operation source="formula" to="temp.tmp_TimePost_list">
                           <expression language="XQuery">list:list($temp.tmp_TimePost_list )</expression>
                        </operation>
                        <link id="kv9g39n8" targetId="kv0wec7r"/>
                     </assignment>
                     <assignment id="kv0wec7r">
                        <title>Assignment to tmp_Matters, tmp_VpUsers</title>
                        <operation source="query" to="temp.tmp_Matters">
                           <query advanceQuery="true" from="AppConnectionVPCdbo:Matters">
                              <where>RefCode = '{$temp.tmp_TimePost.RefCode}' AND MatterCode = '{$temp.tmp_TimePost.MatterCode}'</where>
                           </query>
                        </operation>
                        <operation source="query" to="temp.tmp_VpUsers">
                           <query advanceQuery="true" from="AppConnectionVPCdbo:VpUser">
                              <where>Ucode = '{$temp.tmp_TimePost.Ucode}'</where>
                           </query>
                        </operation>
                        <link id="kv0wec92" targetId="kv0wec8l"/>
                     </assignment>
                     <eventContainer id="kv0wec8l">
                        <service id="kv0wec8u">
                           <title>GET GUID from SAP</title>
                           <serviceName>AppSvcPOSTEnterpriseProject:GET_UUID_EmailID_ECD</serviceName>
                           <serviceGUID>9FzWVN2Pl4xizaa48pMaWn</serviceGUID>
                           <serviceInput>
                              <parameter name="username" source="field" updatable="true">temp.tmp_UserName</parameter>
                              <parameter name="password" source="field" updatable="true">temp.tmp_Password</parameter>
                              <parameter name="in_hostname" source="field" updatable="true">temp.tmp_HostName</parameter>
                              <parameter name="in_DefaultEmailAddress" source="field" updatable="true">temp.tmp_VpUsers.MailID</parameter>
                              <parameter name="in_CompanyCode" source="formula">
                                 <expression language="XQuery">util:iif(fn:string-length($temp.tmp_Matters.RevEntity )=5, fn:substring($temp.tmp_Matters.RevEntity, 1, 2) || fn:substring($temp.tmp_Matters.RevEntity, 4, 2) ,$temp.tmp_Matters.RevEntity)</expression>
                              </parameter>
                           </serviceInput>
                        </service>
                        <flow id="kv0wec8m">
                           <container id="kv0wec8n" type="exclusive">
                              <title>O_ServiceCostLevel</title>
                              <flow id="kv0wec8o">
                                 <assignment id="kv6b7ep1">
                                    <title>Assign Success Email values 1</title>
                                    <operation source="formula" to="temp.tmp_EmailInput[1]/subject">
                                       <expression language="XQuery">fn:concat('API12-Timesheet Posting Failed - Invalid User' ,$temp.tmp_TimePost.Ucode,'-',$temp.tmp_TimePost.ProformaNr)</expression>
                                    </operation>
                                    <operation source="formula" to="temp.tmp_EmailInput[1]/body">
                                       <expression language="XQuery">'Please Verify User'</expression>
                                    </operation>
                                    <operation source="constant" to="temp.tmp_EmailInput[1]/to">nitish.kumar@vistra.com,veerabhadra.dhikonda@vistra.com</operation>
                                    <link id="kv6b7erz" targetId="kv6b7ery"/>
                                 </assignment>
                                 <assignment id="kv67fwfr">
                                    <title>TimePost Tail Listing 1</title>
                                    <operation source="formula" to="temp.tmp_TimePost_list">
                                       <expression language="XQuery">list:tail($temp.tmp_TimePost_list )</expression>
                                    </operation>
                                    <link id="kv67fwg6" targetId="kv67fwg5"/>
                                 </assignment>
                                 <service id="kv6b7ery">
                                    <title>sendEmailService 1</title>
                                    <serviceName>AppConn-Email-1:sendEmailService</serviceName>
                                    <serviceGUID>aGqWxC1jkG7dWgHznehPkO</serviceGUID>
                                    <serviceInput>
                                       <parameter name="emailTaskInput" source="field" updatable="true">temp.tmp_EmailInput</parameter>
                                    </serviceInput>
                                    <link id="kv6b7es0" targetId="kv67fwfr"/>
                                 </service>
                                 <jumpTo id="kv67fwg5">
                                    <link id="kv67fwgi" targetId="kv0wec0p"/>
                                 </jumpTo>
                              </flow>
                              <flow id="kv0wec8q">
                                 <assignment id="kv0wec9w">
                                    <title>Set GET Output</title>
                                    <operation source="formula" to="temp.tmp_Flag">
                                       <expression language="XQuery">util:iif(util:isNull($output.O_UUID ),'N','Y')</expression>
                                    </operation>
                                    <operation source="field" to="temp.tmp_BusinessPartnerUUID">output.O_UUID</operation>
                                    <operation source="field" to="temp.tmp_CompanyCode">output.O_CompanyCode</operation>
                                    <operation source="field" to="temp.tmp_PersonWorkAgreement">output.O_PersonWorkAgreement</operation>
                                    <operation source="field" to="temp.tmp_ServiceCostLevel">output.O_ServiceCostLevel</operation>
                                    <operation source="field" to="temp.tmp_PersonExternalID">output.O_PersonExternalID</operation>
                                    <link id="kvv19ng6" targetId="kvv19ng5"/>
                                 </assignment>
                                 <assignment id="kvv19ng5">
                                    <title>Assignment to tmp_TZ</title>
                                    <operation source="formula" to="temp.tmp_TZ">
                                       <expression language="XQuery">fn:adjust-dateTime-to-timezone($temp.tmp_TimePost.ActivDate, xs:dayTimeDuration("PT10H"))</expression>
                                    </operation>
                                    <link id="kvv19ng7" targetId="kv27zsfe"/>
                                 </assignment>
                                 <assignment id="kv27zsfe">
                                    <title>Format Date</title>
                                    <operation source="formula" to="temp.tmp_TimeSheetDate">
                                       <expression language="XQuery">fn:concat('/Date(',date:dateToMillis($temp.tmp_TZ)+75600000, ')/')</expression>
                                    </operation>
                                    <link id="kv27zsfy" targetId="kv27zsfx"/>
                                 </assignment>
                                 <assignment id="kv27zsfx">
                                    <title>set PO</title>
                                    <operation source="formula" to="temp.tmp_PO[1]/ActivityType">
                                       <expression language="XQuery">util:iif($output.O_ServiceCostLevel=1, 'T001', 
util:iif($output.O_ServiceCostLevel=2, 'T002', 
util:iif($output.O_ServiceCostLevel=3, 'T003', 
util:iif($output.O_ServiceCostLevel=4, 'T004', 
util:iif($output.O_ServiceCostLevel=5, 'T005', 
util:iif($output.O_ServiceCostLevel=6, 'T006', 
util:iif($output.O_ServiceCostLevel=7, 'T007', 
util:iif($output.O_ServiceCostLevel=8, 'T008'
))))))))</expression>
                                    </operation>
                                    <operation source="field" to="temp.tmp_PO[1]/CompanyCode">temp.tmp_CompanyCode</operation>
                                    <operation source="constant" to="temp.tmp_PO[1]/HoursUnitOfMeasure">H</operation>
                                    <operation source="field" to="temp.tmp_PO[1]/PersonWorkAgreement">temp.tmp_PersonWorkAgreement</operation>
                                    <operation source="field" to="temp.tmp_PO[1]/PersonWorkAgreementExternalID">temp.tmp_PersonExternalID</operation>
                                    <operation source="formula" to="temp.tmp_PO[1]/RecordedHours">
                                       <expression language="XQuery">$temp.tmp_NrUnits</expression>
                                    </operation>
                                    <operation source="constant" to="temp.tmp_PO[1]/RecordedQuantity">1.000</operation>
                                    <operation source="field" to="temp.tmp_PO[1]/TimeSheetDate">temp.tmp_TimeSheetDate</operation>
                                    <operation source="constant" to="temp.tmp_PO[1]/TimeSheetIsReleasedOnSave">true</operation>
                                    <operation source="constant" to="temp.tmp_PO[1]/TimeSheetOperation">C</operation>
                                    <operation source="constant" to="temp.tmp_PO[1]/TimeSheetStatus">30</operation>
                                    <operation source="formula" to="temp.tmp_PO[1]/WBSElement">
                                       <expression language="XQuery">fn:concat('VPC-', $temp.tmp_TimePost.RefCode, '-', $temp.tmp_TimePost.MatterCode  )</expression>
                                    </operation>
                                    <operation source="field" to="temp.tmp_PO[1]/YY1_ServiceCode_TIM">temp.tmp_TimePost.ServCode</operation>
                                    <operation source="constant" to="temp.tmp_PO[1]/YY1_VTimeStatus_TIM">30</operation>
                                    <link id="kv27zsgu" targetId="kv27zsgt"/>
                                 </assignment>
                                 <assignment id="kv27zsgt">
                                    <title>Assignment to tmp_NrUnits</title>
                                    <operation source="formula" to="temp.tmp_NrUnits">
                                       <expression language="XQuery">$temp.tmp_TimePost.NrUnits * 0.1</expression>
                                    </operation>
                                    <link id="kv27zshd" targetId="kv27zshc"/>
                                 </assignment>
                                 <assignment id="kv27zshc">
                                    <title>set Payload2</title>
                                    <operation source="formula" to="temp.tmp_RefPO">
                                       <expression language="XQuery">&lt;root&gt;
   &lt;d&gt;
      &lt;YY1_ServiceCode_TIM&gt;{$temp.tmp_PO[1]/YY1_ServiceCode_TIM }&lt;/YY1_ServiceCode_TIM&gt;
      &lt;PersonWorkAgreementExternalID&gt;{$temp.tmp_PO[1]/PersonWorkAgreementExternalID }&lt;/PersonWorkAgreementExternalID&gt;
      &lt;TimeSheetStatus&gt;{$temp.tmp_PO[1]/TimeSheetStatus }&lt;/TimeSheetStatus&gt;
      &lt;TimeSheetOperation&gt;{$temp.tmp_PO[1]/TimeSheetOperation }&lt;/TimeSheetOperation&gt;
      &lt;YY1_VTimeStatus_TIM&gt;{$temp.tmp_PO[1]/YY1_VTimeStatus_TIM }&lt;/YY1_VTimeStatus_TIM&gt;
      
      &lt;TimeSheetDate&gt;{$temp.tmp_TimeSheetDate}&lt;/TimeSheetDate&gt;
      &lt;TimeSheetIsReleasedOnSave&gt;{$temp.tmp_PO[1]/TimeSheetIsReleasedOnSave} &lt;/TimeSheetIsReleasedOnSave&gt;
      &lt;TimeSheetDataFields&gt;
         &lt;WBSElement&gt;{$temp.tmp_PO[1]/WBSElement}&lt;/WBSElement&gt;
         &lt;HoursUnitOfMeasure&gt;{$temp.tmp_PO[1]/HoursUnitOfMeasure }&lt;/HoursUnitOfMeasure&gt;
         
         &lt;ActivityType&gt;{$temp.tmp_PO[1]/ActivityType}&lt;/ActivityType&gt;
         
        
            
        
         &lt;RecordedHours&gt;{$temp.tmp_NrUnits}&lt;/RecordedHours&gt;
         
       &lt;/TimeSheetDataFields&gt;
       
      &lt;CompanyCode&gt;{$temp.tmp_PO[1]/CompanyCode }&lt;/CompanyCode&gt;
      &lt;PersonWorkAgreement&gt;{$temp.tmp_PO[1]/PersonWorkAgreement }&lt;/PersonWorkAgreement&gt;
   &lt;/d&gt;
&lt;/root&gt;
</expression>
                                    </operation>
                                    <link id="kv2839nt" targetId="kv2839nb"/>
                                 </assignment>
                                 <eventContainer id="kv2839nb">
                                    <service id="kv2839nm">
                                       <title>POST_WorkForce_TimeSheet</title>
                                       <serviceName>AppSvcPOSTTimeSheetEntry:POST_WorkForce_TimeSheet</serviceName>
                                       <serviceGUID>4rlCvdGslKohT1ji19M3kH</serviceGUID>
                                       <serviceInput>
                                          <parameter name="body" source="formula">
                                             <expression language="XQuery">$temp.tmp_RefPO </expression>
                                          </parameter>
                                          <parameter name="in_X_CSRF_TOKEN" source="field" updatable="true">output.o_SvcERPGetToken_X_CSRF_TOKEN</parameter>
                                          <parameter name="in_Cookie" source="field" updatable="true">output.o_SvcERPGetToken_Cookie</parameter>
                                          <parameter name="hostname" source="field" updatable="true">temp.tmp_HostName</parameter>
                                       </serviceInput>
                                    </service>
                                    <flow id="kv2839nc">
                                       <assignment id="kv2839nd">
                                          <title>TimePost Tail Listing</title>
                                          <operation source="formula" to="temp.tmp_TimePost_list">
                                             <expression language="XQuery">list:tail($temp.tmp_TimePost_list )</expression>
                                          </operation>
                                          <link id="kvvv2azs" targetId="kv2839vi"/>
                                       </assignment>
                                       <jumpTo id="kv2839vi">
                                          <link id="kv2839vv" targetId="kv0wec0p"/>
                                       </jumpTo>
                                    </flow>
                                    <flow id="kv2839nf">
                                       <container id="kv2839ng" type="exclusive">
                                          <title>Code</title>
                                          <flow id="kv2839nh">
                                             <subflow id="kv2839ni">
                                                <title>Process_P2B_Event_ErrorLog for POST failure</title>
                                                <subflowGUID>7N5uKhvv6kXg3zoRAbuggF</subflowGUID>
                                                <subflowPath>Process_P2B_Event_ErrorLog</subflowPath>
                                                <runForEach>false</runForEach>
                                                <input>
                                                   <parameter name="i_X_TRANSACTION_ID" source="formula" updatable="true">
                                                      <expression language="XQuery">fn:concat('API12-',$temp.tmp_PersonWorkAgreement,'-',$output.O_PersonExternalID )</expression>
                                                   </parameter>
                                                   <parameter name="i_IICS_Run_ID" source="formula" updatable="true">
                                                      <expression language="XQuery">util:getProcessId()</expression>
                                                   </parameter>
                                                   <parameter name="i_Code" source="field" updatable="true">output.faultInfo[1]/code</parameter>
                                                   <parameter name="i_Error" source="field" updatable="true">output.faultInfo[1]/detail</parameter>
                                                   <parameter name="i_Description" source="field" updatable="true">output.faultInfo[1]/reason</parameter>
                                                </input>
                                                <outputDef/>
                                                <link id="kv9e14xy" targetId="kv9e14xx"/>
                                             </subflow>
                                             <assignment id="kv9e14xx">
                                                <title>TimePost Tail Listing 3</title>
                                                <operation source="formula" to="temp.tmp_TimePost_list">
                                                   <expression language="XQuery">list:tail($temp.tmp_TimePost_list )</expression>
                                                </operation>
                                                <link id="kv9e14xz" targetId="kv2839u9"/>
                                             </assignment>
                                             <jumpTo id="kv2839u9">
                                                <link id="kv2839um" targetId="kv0wec0p"/>
                                             </jumpTo>
                                          </flow>
                                          <flow id="kv2839nk">
                                             <assignment id="kv9e14x5">
                                                <title>TimePost Tail Listing 2</title>
                                                <operation source="formula" to="temp.tmp_TimePost_list">
                                                   <expression language="XQuery">list:tail($temp.tmp_TimePost_list )</expression>
                                                </operation>
                                                <link id="kv9e14x6" targetId="kv2839nl"/>
                                             </assignment>
                                             <end id="kv2839nl">
                                                <title>End 2</title>
                                             </end>
                                          </flow>
                                          <link id="kv2839nq" targetId="kv2839nh" type="containerLink">
                                             <condition source="formula">
                                                <function name="contains">
                                                   <arg name="left">{$output.faultInfo[1]/code}</arg>
                                                   <arg name="right">HTTP_400</arg>
                                                </function>
                                             </condition>
                                          </link>
                                          <link id="kv2839nr" targetId="kv2839nk" type="containerLink"/>
                                       </container>
                                    </flow>
                                    <link id="kv2839nn" targetId="kv2839nc" type="containerLink"/>
                                    <events>
                                       <catch faultField="faultInfo" id="kun2rg2i" interrupting="true">
                                          <link id="kv2839no" targetId="kv2839nf" type="containerLink"/>
                                       </catch>
                                    </events>
                                 </eventContainer>
                              </flow>
                              <link id="kv0wec8y" targetId="kv0wec8o" type="containerLink">
                                 <condition source="formula">
                                    <function name="string-equals">
                                       <arg name="left">{$output.O_ServiceCostLevel}</arg>
                                       <arg name="right">''</arg>
                                    </function>
                                 </condition>
                              </link>
                              <link id="kv0wec8z" targetId="kv0wec8q" type="containerLink"/>
                           </container>
                        </flow>
                        <flow id="kv0wec8r">
                           <subflow id="kv0wec8s">
                              <title>Process_P2B_Event_ErrorLog</title>
                              <subflowGUID>7N5uKhvv6kXg3zoRAbuggF</subflowGUID>
                              <subflowPath>Process_P2B_Event_ErrorLog</subflowPath>
                              <runForEach>false</runForEach>
                              <input>
                                 <parameter name="i_X_TRANSACTION_ID" source="formula" updatable="true">
                                    <expression language="XQuery">fn:concat('API12-',fn:current-dateTime() )</expression>
                                 </parameter>
                                 <parameter name="i_IICS_Run_ID" source="formula" updatable="true">
                                    <expression language="XQuery">util:getProcessId()</expression>
                                 </parameter>
                                 <parameter name="i_Code" source="field" updatable="true">output.faultInfo_1Get[1]/code</parameter>
                                 <parameter name="i_Error" source="field" updatable="true">output.faultInfo_1Get[1]/detail</parameter>
                                 <parameter name="i_Description" source="field" updatable="true">output.faultInfo_1Get[1]/reason</parameter>
                              </input>
                              <outputDef/>
                              <link id="kv0wec91" targetId="kv0wec8t"/>
                           </subflow>
                           <end id="kv0wec8t">
                              <title>End Failed to get GUID from SAP</title>
                           </end>
                        </flow>
                        <link id="kv0wec8v" targetId="kv0wec8m" type="containerLink"/>
                        <events>
                           <catch faultField="faultInfo_1Get" id="kuwjm0gl" interrupting="true">
                              <link id="kv0wec8w" targetId="kv0wec8r" type="containerLink"/>
                           </catch>
                        </events>
                     </eventContainer>
                  </flow>
                  <flow id="kv0wec1m">
                     <create id="kv67fw11">
                        <title>VIP_P2B_API12_TimePost_Audit</title>
                        <entityName>ConnectionDQMetadata-1:VIP_P2B_API12_TimePost_Audit</entityName>
                        <createInput>
                           <parameter name="Start_TS" source="field" updatable="true">temp.tmp_EndTime</parameter>
                           <parameter name="End_TS" source="formula" updatable="true">
                              <expression language="XQuery">fn:current-dateTime()</expression>
                           </parameter>
                           <parameter name="Trigger_TS" source="formula" updatable="true">
                              <expression language="XQuery">fn:current-dateTime()</expression>
                           </parameter>
                           <parameter name="Flag" source="constant" updatable="true">Y</parameter>
                           <parameter name="Status" source="constant" updatable="true">I</parameter>
                           <parameter name="Description" source="formula" updatable="true">
                              <expression language="XQuery">fn:concat('Proforma Nr list Count for this Batch - ',$temp.tmp_CountList)</expression>
                           </parameter>
                        </createInput>
                        <link id="kv67fw12" targetId="kv0wec57"/>
                     </create>
                     <end id="kv0wec57">
                        <title>End 3</title>
                     </end>
                  </flow>
                  <link id="kv0wec1d" targetId="kv0wec1k" type="containerLink">
                     <condition source="formula">
                        <function name="not-empty">
                           <arg name="field">{$temp.tmp_TimePost_list}</arg>
                        </function>
                     </condition>
                  </link>
                  <link id="kv0wec1g" targetId="kv0wec1m" type="containerLink">
                     <condition source="formula">
                        <function name="empty">
                           <arg name="field">{$temp.tmp_TimePost_list}</arg>
                        </function>
                     </condition>
                  </link>
               </container>
            </flow>
         </process>
         <ns1:sample-data-sets xmlns:ns1="http://schemas.active-endpoints.com/appmodules/repository/2010/10/sampleData.xsd">
            <ns1:SampleData>
               <ns1:Id>a6def2cd-fe01-4640-9db1-9163d7ecad78</ns1:Id>
               <ns1:Name>DummyRun</ns1:Name>
               <ns1:CreatedBy>tiaan.stander@vistra.com.SAML</ns1:CreatedBy>
               <ns1:CreationDate>2021-12-06T15:34:22Z</ns1:CreationDate>
               <ns1:ModifiedBy>Rudolph.Boshoff.TST</ns1:ModifiedBy>
               <ns1:ModificationDate>2023-05-26T08:52:58Z</ns1:ModificationDate>
               <ns1:Data format="json">{}</ns1:Data>
            </ns1:SampleData>
         </ns1:sample-data-sets>
      </types1:Entry>
      <types1:GUID>69fGCEl2pL5lJHm8GpROME</types1:GUID>
      <types1:DisplayName>ProcessPostActualTimePosting</types1:DisplayName>
   </types1:Item>
   <types1:CurrentServerDateTime>2023-09-16T18:19:18.529Z</types1:CurrentServerDateTime>
</aetgt:getResponse>
