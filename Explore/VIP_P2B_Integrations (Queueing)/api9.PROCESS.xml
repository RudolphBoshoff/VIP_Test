<aetgt:getResponse xmlns:aetgt="http://schemas.active-endpoints.com/appmodules/repository/2010/10/avrepository.xsd"
                   xmlns:types1="http://schemas.active-endpoints.com/appmodules/repository/2010/10/avrepository.xsd">
   <types1:Item>
      <types1:EntryId>2JrhNzUzeA8rJ4p-gt-1248338-2021-12-20T09:31:52.869Z::pd.xml</types1:EntryId>
      <types1:Name>api9</types1:Name>
      <types1:ParentFlowIds>9i92qBbbeJOSM8N-gt-37242250-2022-10-12T10:48:22.975Z::pd.xml</types1:ParentFlowIds>
      <types1:MimeType>application/xml+process</types1:MimeType>
      <types1:Description>Credit Block Status (Block/Open) is passed from SAP to VPC for 1 Customer and all Matters connected to the customer within a specific RevEntity</types1:Description>
      <types1:AppliesTo/>
      <types1:Tags>.agent:VIP_IICS_SA_SG_ONPREM_GROUP,.anonymous</types1:Tags>
      <types1:VersionLabel>1.0</types1:VersionLabel>
      <types1:State>CURRENT</types1:State>
      <types1:ProcessGroup/>
      <types1:CreatedBy>rudolph.boshoff@vistra.com.SAML</types1:CreatedBy>
      <types1:CreationDate>2021-12-20T09:31:53Z</types1:CreationDate>
      <types1:ModifiedBy>Rudolph.Boshoff.TST</types1:ModifiedBy>
      <types1:ModificationDate>2023-06-19T11:47:35Z</types1:ModificationDate>
      <types1:PublicationStatus>out-of-date</types1:PublicationStatus>
      <types1:PublishedBy>Rudolph.Boshoff.TST</types1:PublishedBy>
      <types1:PublicationDate>2023-06-19T11:48:14Z</types1:PublicationDate>
      <types1:PublishedContributionId>project:/spi.api9/api9.pd.xml</types1:PublishedContributionId>
      <types1:AutosaveExists>false</types1:AutosaveExists>
      <types1:Entry>
         <process xmlns="http://schemas.active-endpoints.com/appmodules/screenflow/2010/10/avosScreenflow.xsd"
                  xmlns:tfm="http://schemas.active-endpoints.com/appmodules/screenflow/2021/04/taskflowModel.xsd"
                  xmlns:list="urn:activevos:spi:list:functions"
                  displayName="api9"
                  name="api9"
                  overrideAPIName="true">
            <parameterSet xmlns="http://schemas.active-endpoints.com/appmodules/screenflow/2021/04/taskflowModel.xsd"/>
            <appliesTo/>
            <description>Credit Block Status (Block/Open) is passed from SAP to VPC for 1 Customer and all Matters connected to the customer within a specific RevEntity</description>
            <tags>.agent:VIP_IICS_SA_SG_ONPREM_GROUP,.anonymous</tags>
            <generator>Informatica Process Designer 11</generator>
            <input>
               <parameter description=""
                          name="in_BlockDetails"
                          required="true"
                          type="reference">
                  <options>
                     <option name="referenceTo">AppSvcYY1:results</option>
                     <option name="required">false</option>
                     <option name="isCopy">true</option>
                     <option name="guid">0L8yRuv9VrIjvcbVfHmB68</option>
                  </options>
               </parameter>
               <parameter description=""
                          name="in_ProcessStartTime"
                          required="true"
                          type="datetime">
                  <options>
                     <option name="thirtyMinutesIncrement">true</option>
                     <option name="required">false</option>
                  </options>
               </parameter>
               <parameter description="Unique ID of the transaction (this can be generated by the source system or manually entered)"
                          name="in_X_TRANSACTION_ID"
                          required="true"
                          type="string">
                  <options>
                     <option name="required">false</option>
                  </options>
               </parameter>
               <parameter description="The name of the event that caused the API to start "
                          name="in_EventName"
                          required="true"
                          type="string">
                  <options>
                     <option name="required">false</option>
                  </options>
               </parameter>
               <parameter description="Process ID of the parent process"
                          name="in_IICS_Process_ID"
                          required="true"
                          type="string">
                  <options>
                     <option name="required">false</option>
                  </options>
               </parameter>
               <parameter description="The name of the API started by the event"
                          name="in_ApiName"
                          required="true"
                          type="string">
                  <options>
                     <option name="required">false</option>
                  </options>
               </parameter>
            </input>
            <output>
               <field description="" name="O_BlockDetailsArray" type="objectlist">
                  <options>
                     <option name="referenceTo">$po:$any</option>
                     <option hide="true" name="multiSelect">true</option>
                     <option name="required">false</option>
                     <option name="isCopy">true</option>
                  </options>
               </field>
            </output>
            <tempFields>
               <field description="" name="bus" type="string">
                  <options>
                     <option name="required">false</option>
                  </options>
               </field>
               <field description="" name="tmp_SAP_UUID" type="string">
                  <options>
                     <option name="required">false</option>
                  </options>
               </field>
               <field description="" name="tmp_Value1" type="string">
                  <options>
                     <option name="required">false</option>
                  </options>
               </field>
               <field description="" name="tmp_hostname" type="string">
                  <options>
                     <option name="required">false</option>
                  </options>
               </field>
               <field description="" name="tmp_VPC_hostname" type="string">
                  <options>
                     <option name="required">false</option>
                  </options>
               </field>
               <field description="" name="tmp_VPC_username" type="string">
                  <options>
                     <option name="required">false</option>
                  </options>
               </field>
               <field description="" name="tmp_VPC_password" type="string">
                  <options>
                     <option name="required">false</option>
                  </options>
               </field>
               <field description="" name="tmp_VPC_Payload" type="reference">
                  <options>
                     <option name="referenceTo">$po:$any</option>
                     <option name="required">false</option>
                     <option name="isCopy">true</option>
                  </options>
               </field>
               <field description="" name="tmp_SAP_RecordCount" type="int">
                  <options>
                     <option name="required">false</option>
                  </options>
               </field>
               <field description="" name="tmp_username" type="string">
                  <options>
                     <option name="required">false</option>
                  </options>
               </field>
               <field description="" name="tmp_password" type="string">
                  <options>
                     <option name="required">false</option>
                  </options>
               </field>
               <field description="" name="tmp_Code" type="string">
                  <options>
                     <option name="required">false</option>
                  </options>
               </field>
               <field description="" name="tmp_Desc" type="string">
                  <options>
                     <option name="required">false</option>
                  </options>
               </field>
               <field description="" name="tmp_Error" type="string">
                  <options>
                     <option name="required">false</option>
                  </options>
               </field>
               <field description="" name="tmp_RmClients" type="reference">
                  <options>
                     <option name="referenceTo">AppConnectionVPCdbo:RmClients</option>
                     <option name="required">false</option>
                     <option name="guid">cta893CVPCvl9C54Pb8Uk8</option>
                  </options>
               </field>
            </tempFields>
            <notes/>
            <deployment skipIfRunning="false" suspendOnFault="false" tracingLevel="verbose">
               <targetLocation>VIP_IICS_SA_SG_ONPREM_GROUP</targetLocation>
               <rest>
                  <allowAnonymousAccess/>
               </rest>
            </deployment>
            <flow id="a">
               <start id="b">
                  <link id="kuy4mok9" targetId="kuy4mok8"/>
               </start>
               <assignment id="kuy4mok8">
                  <title>Assignment to tmp_hostname, tmp_username etc.</title>
                  <operation source="formula" to="temp.tmp_hostname">
                     <expression language="XQuery">util:resolveURN('URN_SAP_Hostname')</expression>
                  </operation>
                  <operation source="formula" to="temp.tmp_username">
                     <expression language="XQuery">util:resolveURN('URN_SAP_Username')</expression>
                  </operation>
                  <operation source="formula" to="temp.tmp_password">
                     <expression language="XQuery">util:resolveURN('URN_SAP_Pwd')</expression>
                  </operation>
                  <operation source="formula" to="temp.tmp_VPC_hostname">
                     <expression language="XQuery">util:resolveURN('URN_VPC_Hostname')</expression>
                  </operation>
                  <operation source="formula" to="temp.tmp_VPC_username">
                     <expression language="XQuery">util:resolveURN('URN_VPC_Username')</expression>
                  </operation>
                  <operation source="formula" to="temp.tmp_VPC_password">
                     <expression language="XQuery">util:resolveURN('URN_VPC_Pwd')</expression>
                  </operation>
                  <operation source="field" to="temp.tmp_Code">input.in_BlockDetails[1]/BusinessPartner</operation>
                  <link id="l8u7i688" targetId="l8mpv0qp"/>
               </assignment>
               <container id="l8mpv0qp" type="exclusive">
                  <title>Block</title>
                  <flow id="l8mpv0qq">
                     <assignment id="l8mpv0qr">
                        <title>Assignment to tmp_RmClients</title>
                        <operation source="query" to="temp.tmp_RmClients">
                           <query advanceQuery="false" from="AppConnectionVPCdbo:RmClients">
                              <where>AddrCode = '{$input.in_BlockDetails[1]/BusinessPartner }'</where>
                           </query>
                        </operation>
                        <link id="l8u7lsfv" targetId="l8mpv1lc"/>
                     </assignment>
                     <subflow id="l8mpv1lc">
                        <title>Process_PUT_UpdateCreditBlock</title>
                        <subflowGUID>61tpqUcE5uNjoL12t4rJUL</subflowGUID>
                        <subflowPath>Process_PUT_UpdateCreditBlock</subflowPath>
                        <runForEach>false</runForEach>
                        <input>
                           <parameter name="in_Body" source="formula" updatable="true">
                              <expression language="XQuery">&lt;root&gt;
  &lt;!-- Changed Value --&gt;
  &lt;FileStatus&gt;{$input.in_BlockDetails[1]/Block }&lt;/FileStatus&gt;
  
  &lt;!-- Unchanged Mandatory Fields --&gt;
  &lt;Admin2Code&gt;{$temp.tmp_RmClients.Admin2Code}&lt;/Admin2Code&gt;
  &lt;AdminCode&gt;{$temp.tmp_RmClients.AdminCode} &lt;/AdminCode&gt;
  &lt;AdminMarkup&gt;{$temp.tmp_RmClients.AdminMarkup} &lt;/AdminMarkup&gt;
  &lt;AddrCode&gt;{$temp.tmp_RmClients.AddrCode }&lt;/AddrCode&gt;
  &lt;BillAddress&gt;{$temp.tmp_RmClients.BillAddress} &lt;/BillAddress&gt;
  &lt;EntClient&gt;{$temp.tmp_RmClients.EntClient} &lt;/EntClient&gt;
  &lt;PayTerm&gt;{$temp.tmp_RmClients.PayTerm} &lt;/PayTerm&gt;
  
  &lt;!-- Unchanged Non Mandatory Fields; Added for https://vistra.atlassian.net/browse/VR-2765 --&gt;
  &lt;bUserMf1&gt;{$temp.tmp_RmClients.BUserMf1 }&lt;/bUserMf1&gt;
  &lt;fileType&gt;{$temp.tmp_RmClients.FileType }&lt;/fileType&gt;
  &lt;reasonCode&gt;{$temp.tmp_RmClients.ReasonCode }&lt;/reasonCode&gt;
  &lt;admin3Code&gt;{$temp.tmp_RmClients.Admin3Code }&lt;/admin3Code&gt;
  &lt;rateIndexation&gt;{$temp.tmp_RmClients.RateIndexation }&lt;/rateIndexation&gt;
  &lt;acctClientCode&gt;{$temp.tmp_RmClients.AcctClientCode }&lt;/acctClientCode&gt;
  &lt;userText&gt;{$temp.tmp_RmClients.UserText }&lt;/userText&gt;
  &lt;taxNumber&gt;{$temp.tmp_RmClients.TaxNumber }&lt;/taxNumber&gt;
  &lt;bFileNote&gt;{$temp.tmp_RmClients.BFileNote }&lt;/bFileNote&gt;
  
&lt;/root&gt;
</expression>
                           </parameter>
                           <parameter name="in_X_TRANSACTION_ID" source="constant" updatable="true">{$input.in_X_TRANSACTION_ID}</parameter>
                           <parameter name="in_EventName" source="constant" updatable="true">{$input.in_EventName}</parameter>
                           <parameter name="in_IICS_Process_ID" source="constant" updatable="true">{$input.in_IICS_Process_ID}</parameter>
                           <parameter name="in_ParentProcessStartTime" source="field" updatable="true">input.in_ProcessStartTime</parameter>
                           <parameter name="in_ApiName" source="constant" updatable="true">{$input.in_ApiName}</parameter>
                           <parameter name="in_ProjectUUID" source="field" updatable="true">temp.tmp_SAP_UUID</parameter>
                           <parameter name="in_AddrCode" source="field">temp.tmp_RmClients.AddrCode</parameter>
                        </input>
                        <outputDef>
                           <field name="out_ResponseCode" type="string">
                              <options>
                                 <option name="required">false</option>
                              </options>
                           </field>
                           <field name="out_ResponseMessage" type="string">
                              <options>
                                 <option name="required">false</option>
                              </options>
                           </field>
                        </outputDef>
                        <link id="l8u86v6a" targetId="l8mpv1pd"/>
                     </subflow>
                     <container id="l8mpv1pd" type="exclusive">
                        <title>Billing File Response Code</title>
                        <flow id="l8mpv1pe">
                           <subflow id="l8mpv1pf">
                              <title>Process_Matters_FindAndUpdate</title>
                              <subflowGUID>98s840fh8uTfYN3B8dvfWC</subflowGUID>
                              <subflowPath>Process_Matters_FindAndUpdate</subflowPath>
                              <runForEach>false</runForEach>
                              <input>
                                 <parameter name="in_BlockDetails" source="field" updatable="true">input.in_BlockDetails</parameter>
                                 <parameter name="in_X_TRANSACTION_ID" source="constant" updatable="true">{$input.in_X_TRANSACTION_ID}</parameter>
                                 <parameter name="in_EventName" source="constant" updatable="true">{$input.in_EventName}</parameter>
                                 <parameter name="in_IICS_Process_ID" source="constant" updatable="true">{$input.in_IICS_Process_ID}</parameter>
                                 <parameter name="in_ApiName" source="constant" updatable="true">{$input.in_ApiName}</parameter>
                                 <parameter name="in_ParentProcessStartTime" source="field" updatable="true">input.in_ProcessStartTime</parameter>
                              </input>
                              <outputDef>
                                 <field name="o_Flag2" type="string">
                                    <options>
                                       <option name="required">false</option>
                                    </options>
                                 </field>
                                 <field name="o_MattersSuccess" type="objectlist">
                                    <options>
                                       <option name="referenceTo">$type:string</option>
                                       <option hide="true" name="multiSelect">true</option>
                                       <option name="required">false</option>
                                    </options>
                                 </field>
                                 <field name="o_MattersFailed" type="objectlist">
                                    <options>
                                       <option name="referenceTo">$type:string</option>
                                       <option hide="true" name="multiSelect">true</option>
                                       <option name="required">false</option>
                                    </options>
                                 </field>
                              </outputDef>
                              <link id="l98i7yyh" targetId="l98i7yyg"/>
                           </subflow>
                           <subflow id="l98i7yyg">
                              <title>Process_PATCH_YY1_LoggingTable</title>
                              <subflowGUID>0ZkSzQ9dNQfd4lY4GYSm8f</subflowGUID>
                              <subflowPath>Process_PATCH_YY1_LoggingTable</subflowPath>
                              <runForEach>false</runForEach>
                              <input>
                                 <parameter name="in_Body" source="formula" updatable="true">
                                    <expression language="XQuery">&lt;root&gt;
	&lt;Value1&gt;{$input.in_BlockDetails[1]/Block }&lt;/Value1&gt;
&lt;/root&gt;</expression>
                                 </parameter>
                                 <parameter name="in_X_TRANSACTION_ID" source="constant" updatable="true">{$input.in_X_TRANSACTION_ID}</parameter>
                                 <parameter name="in_EventName" source="constant" updatable="true">{$input.in_EventName}</parameter>
                                 <parameter name="in_IICS_Process_ID" source="constant" updatable="true">{$input.in_IICS_Process_ID}</parameter>
                                 <parameter name="in_ParentProcessStartTime" source="field" updatable="true">input.in_ProcessStartTime</parameter>
                                 <parameter name="in_ApiName" source="constant" updatable="true">{$input.in_ApiName}</parameter>
                                 <parameter name="SAP_UUID" source="constant" updatable="true">{$input.in_BlockDetails[1]/SAP_UUID}</parameter>
                                 <parameter name="in_Body2" source="formula" updatable="true">
                                    <expression language="XQuery">&lt;root&gt;
  &lt;ID&gt;VPC&lt;/ID&gt;
  &lt;SubID&gt;API09&lt;/SubID&gt;
  &lt;KeyValue1&gt;{fn:format-number($input.in_BlockDetails[1]/BusinessPartner ,'0000000000' )}&lt;/KeyValue1&gt;
  &lt;CompanyCode&gt;{$input.in_BlockDetails[1]/SalesOrganization }&lt;/CompanyCode&gt;
  &lt;Value1&gt;{$input.in_BlockDetails[1]/Block }&lt;/Value1&gt;
&lt;/root&gt;</expression>
                                 </parameter>
                              </input>
                              <outputDef>
                                 <field name="out_HttpStatusCode" type="string">
                                    <options>
                                       <option name="required">false</option>
                                    </options>
                                 </field>
                                 <field name="out_Detail" type="string">
                                    <options>
                                       <option name="required">false</option>
                                    </options>
                                 </field>
                                 <field name="out_Reason" type="string">
                                    <options>
                                       <option name="required">false</option>
                                    </options>
                                 </field>
                              </outputDef>
                           </subflow>
                           <link id="l8mpv1pj" targetId="l8mpv1pd" type="containerLink"/>
                        </flow>
                        <flow id="l8mpv1pg">
                           <link id="l8mpv1pk" targetId="l8mpv1pd" type="containerLink"/>
                        </flow>
                        <link id="l8mpv1ph" targetId="l8mpv1pe" type="containerLink">
                           <condition source="formula">
                              <function name="string-equals">
                                 <arg name="left">{$output.out_ResponseCode}</arg>
                                 <arg name="right">200</arg>
                              </function>
                           </condition>
                        </link>
                        <link id="l8mpv1pi" targetId="l8mpv1pg" type="containerLink"/>
                        <link id="l98i7yyf" targetId="l8mpv1qk"/>
                     </container>
                     <end id="l8mpv1qk">
                        <title>End 1</title>
                     </end>
                  </flow>
                  <flow id="l8mpv0qx">
                     <create id="l8u86yav">
                        <title>VIP_P2B_InterfaceErrorLog</title>
                        <entityName>ConnectionDQMetadata-1:VIP_P2B_InterfaceErrorLog</entityName>
                        <createInput>
                           <parameter name="X_TRANSACTION_ID" source="constant" updatable="true">{$input.in_X_TRANSACTION_ID}</parameter>
                           <parameter name="IICS_Run_ID" source="formula" updatable="true">
                              <expression language="XQuery">'Parent='||$input.in_IICS_Process_ID||'^FailureAt='||util:getProcessId()||'^'</expression>
                           </parameter>
                           <parameter name="Code" source="constant" updatable="true">199</parameter>
                           <parameter name="Error" source="constant" updatable="true">Miscellaneous Warning</parameter>
                           <parameter name="Description" source="constant" updatable="true">Property 'Block' must be 0 or 2. Process Terminated</parameter>
                           <parameter name="DateCreated" source="formula" updatable="true">
                              <expression language="XQuery">fn:current-dateTime()</expression>
                           </parameter>
                           <parameter name="DateProcessStart" source="field" updatable="true">input.in_ProcessStartTime</parameter>
                           <parameter name="API_NAME" source="constant" updatable="true">{$input.in_ApiName}</parameter>
                           <parameter name="EVENT_NAME" source="constant" updatable="true">{$input.in_EventName}</parameter>
                           <parameter name="DATA_KEY" source="formula" updatable="true">
                              <expression language="XQuery">'BusinessPartner='||$input.in_BlockDetails[1]/BusinessPartner||
'^SalesOrganization='||$input.in_BlockDetails[1]</expression>
                           </parameter>
                           <parameter name="IICS_PROCESS_NAME" source="formula" updatable="true">
                              <expression language="XQuery">util:getAssetName()</expression>
                           </parameter>
                           <parameter name="REST_URL" source="constant" updatable="true">N/A</parameter>
                           <parameter name="REST_PAYLOAD" source="formula" updatable="true">
                              <expression language="XQuery">util:toJSON($temp.tmp_VPC_Payload )</expression>
                           </parameter>
                        </createInput>
                        <link id="l8u8709f" targetId="l8mpv1sb"/>
                     </create>
                     <end id="l8mpv1sb">
                        <title>End 2</title>
                     </end>
                  </flow>
                  <link id="l8mpv0qz" targetId="l8mpv0qq" type="containerLink">
                     <condition source="formula">
                        <function name="less-or-equals">
                           <arg name="left">{$input.in_BlockDetails[1]/Block}</arg>
                           <arg name="right">{2}</arg>
                        </function>
                     </condition>
                  </link>
                  <link id="l8mpv0r0" targetId="l8mpv0qx" type="containerLink"/>
               </container>
            </flow>
         </process>
         <ns1:sample-data-sets xmlns:ns1="http://schemas.active-endpoints.com/appmodules/repository/2010/10/sampleData.xsd">
            <ns1:SampleData>
               <ns1:Id>19c6dbe2-6ce9-46b0-ae69-6f925dcb807d</ns1:Id>
               <ns1:Name>test</ns1:Name>
               <ns1:CreatedBy>rudolph.boshoff@vistra.com.SAML</ns1:CreatedBy>
               <ns1:CreationDate>2021-12-20T09:31:53Z</ns1:CreationDate>
               <ns1:ModifiedBy>Rudolph.Boshoff.TST</ns1:ModifiedBy>
               <ns1:ModificationDate>2023-06-19T11:33:39Z</ns1:ModificationDate>
               <ns1:Data format="json">{
	"in_BlockDetails": {
		"SubID": "API09",
		"SAP_UUID": "fa163e9c-e1e2-1eed-86a9-366805de642f",
		"BusinessPartner": "11924177",
		"Block": "0",
		"SalesOrganization": "VG18",
		"Value1": "2",
		"metadata": {
			"id": "https://my305570.s4hana.ondemand.com:443/sap/opu/odata/sap/YY1_LOGGINGTABLE_CDS/YY1_LOGGINGTABLE(guid'fa163e9c-e1e2-1eed-86a9-366805de642f')",
			"type": "YY1_LOGGINGTABLE_CDS.YY1_LOGGINGTABLEType",
			"uri": "https://my305570.s4hana.ondemand.com:443/sap/opu/odata/sap/YY1_LOGGINGTABLE_CDS/YY1_LOGGINGTABLE(guid'fa163e9c-e1e2-1eed-86a9-366805de642f')"
		},
		"Code": ""
	},
	"in_ProcessStartTime": "2023-06-19T11:07:00.000Z",
	"in_X_TRANSACTION_ID": "VR-2765",
	"in_EventName": "Test 1 reverse",
	"in_IICS_Process_ID": "Not Set",
	"in_ApiName": "API-09"
	
	
}</ns1:Data>
            </ns1:SampleData>
            <ns1:SampleData>
               <ns1:Id>887c1278-30e0-41e3-b34a-9eee39b1e227</ns1:Id>
               <ns1:Name>Test1</ns1:Name>
               <ns1:CreatedBy>janardhan.reddy@vistra.com.SAML</ns1:CreatedBy>
               <ns1:CreationDate>2022-06-16T06:34:31Z</ns1:CreationDate>
               <ns1:ModifiedBy>janardhan.reddy@vistra.com.SAML</ns1:ModifiedBy>
               <ns1:ModificationDate>2022-06-16T06:34:31Z</ns1:ModificationDate>
               <ns1:Data format="json">{}</ns1:Data>
            </ns1:SampleData>
         </ns1:sample-data-sets>
      </types1:Entry>
      <types1:GUID>kEVizE3ViGobK76V6UogOP</types1:GUID>
      <types1:DisplayName>api9</types1:DisplayName>
   </types1:Item>
   <types1:CurrentServerDateTime>2023-09-16T18:19:19.146Z</types1:CurrentServerDateTime>
</aetgt:getResponse>
